<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generate Sample Report - DDP</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #1a1a1a;
            color: #fff;
            text-align: center;
        }
        .btn {
            background: linear-gradient(to right, #06b6d4, #3b82f6);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 18px;
            font-weight: bold;
            border-radius: 8px;
            cursor: pointer;
            margin: 10px;
        }
        .btn:hover {
            opacity: 0.9;
        }
        .info {
            background: #2a2a2a;
            border: 1px solid #444;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
        }
        .status {
            margin-top: 20px;
            font-size: 14px;
            color: #06b6d4;
        }
    </style>
</head>
<body>
    <h1>üìÑ DDP Sample Report Generator</h1>
    
    <div class="info">
        <h3>Sample Scenario:</h3>
        <p><strong>Deal:</strong> $171M crude oil transaction</p>
        <p><strong>Buyer:</strong> Global Trade Solutions LLC (USA)</p>
        <p><strong>Seller:</strong> Nigerian Petroleum Exports Limited (Nigeria)</p>
        <p><strong>Risk Level:</strong> MEDIUM (62/100) ‚ö†Ô∏è</p>
        <br>
        <p><strong>Red Flags Included:</strong></p>
        <ul>
            <li>‚úì Seller not found in global registries</li>
            <li>‚úì 100% upfront payment requested</li>
            <li>‚úì No inspection rights</li>
            <li>‚úì High-value transaction</li>
            <li>‚úì Email infrastructure concerns</li>
        </ul>
        <br>
        <p><strong>Features Demonstrated:</strong></p>
        <ul>
            <li>‚úì Professional multi-page PDF</li>
            <li>‚úì Risk scoring with explanations</li>
            <li>‚úì Database verification results</li>
            <li>‚úì "Why This Matters" sections</li>
            <li>‚úì Action checklists</li>
            <li>‚úì Legal warnings</li>
        </ul>
    </div>
    
    <button class="btn" onclick="generateSampleReport()">üìÑ Generate Sample Report PDF</button>
    
    <div class="status" id="status"></div>

    <script>
        // Sample report data
        const sampleData = {
            documentType: "LOI - Letter of Intent",
            uploadedAt: "2025-12-08T15:30:00Z",
            
            buyerName: "Global Trade Solutions LLC",
            buyerCountry: "United States",
            buyerEmail: "procurement@globaltrade-solutions.com",
            
            sellerName: "Nigerian Petroleum Exports Limited",
            sellerCountry: "Nigeria",
            sellerEmail: "sales@npe-limited.com.ng",
            
            productDescription: "Bonny Light Crude Oil",
            quantity: "2,000,000 barrels",
            totalValue: "$171,000,000 USD",
            
            paymentTerms: "100% advance payment via wire transfer",
            
            score: 62,
            riskLevel: "MEDIUM",
            
            databaseResults: {
                sanctions: {
                    checked: true,
                    hits: 0,
                    results: []
                },
                companyRegistries: {
                    openCorporates: {
                        seller: {
                            checked: true,
                            found: false
                        },
                        buyer: {
                            checked: true,
                            found: true,
                            companyNumber: "2847193",
                            jurisdiction: "Delaware, USA"
                        }
                    }
                },
                financial: {
                    buyerEmail: {
                        valid: true,
                        risk: "LOW"
                    },
                    sellerEmail: {
                        valid: true,
                        risk: "ELEVATED"
                    }
                }
            },
            
            riskFlags: [
                "Seller company not found in global registries",
                "100% upfront payment requested",
                "No inspection rights in contract",
                "High-value transaction ($171M)",
                "Seller using low-quality email infrastructure"
            ]
        };

        function generateSampleReport() {
            const statusEl = document.getElementById('status');
            statusEl.textContent = 'Generating PDF...';
            
            try {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                const pageWidth = doc.internal.pageSize.width;
                const pageHeight = doc.internal.pageSize.height;
                const margin = 15;
                const maxWidth = pageWidth - (margin * 2);
                
                let yPos = margin;
                let currentPage = 1;
                
                // Colors
                const colors = {
                    black: [0, 0, 0],
                    darkGray: [51, 51, 51],
                    gray: [102, 102, 102],
                    lightGray: [153, 153, 153],
                    cyan: [6, 182, 212],
                    green: [22, 163, 74],
                    yellow: [202, 138, 4],
                    red: [220, 38, 38],
                    white: [255, 255, 255]
                };
                
                // Helper functions
                function checkSpace(needed) {
                    if (yPos + needed > pageHeight - margin) {
                        doc.addPage();
                        currentPage++;
                        yPos = margin;
                        addHeader();
                        yPos += 15;
                    }
                }
                
                function addHeader() {
                    doc.setFontSize(12);
                    doc.setTextColor(...colors.cyan);
                    doc.setFont(undefined, 'bold');
                    doc.text('DUDE DILIGENCE PRO', margin, 10);
                    doc.setFontSize(8);
                    doc.setTextColor(...colors.gray);
                    doc.setFont(undefined, 'normal');
                    doc.text('dudediligence.pro', pageWidth - margin - 30, 10);
                    doc.setDrawColor(...colors.lightGray);
                    doc.line(margin, 12, pageWidth - margin, 12);
                }
                
                // PAGE 1: COVER & RISK SCORE
                addHeader();
                yPos = 30;
                
                // Title
                doc.setFontSize(20);
                doc.setTextColor(...colors.cyan);
                doc.setFont(undefined, 'bold');
                doc.text('RISK ASSESSMENT REPORT', pageWidth / 2, yPos, { align: 'center' });
                yPos += 8;
                
                doc.setFontSize(10);
                doc.setTextColor(...colors.gray);
                doc.setFont(undefined, 'normal');
                doc.text('SAMPLE REPORT - For Demonstration', pageWidth / 2, yPos, { align: 'center' });
                yPos += 20;
                
                // Risk Score Box
                const boxHeight = 45;
                const scoreColor = colors.yellow; // Medium risk
                
                doc.setFillColor(...scoreColor);
                doc.setDrawColor(...scoreColor);
                doc.roundedRect(margin, yPos, maxWidth, boxHeight, 3, 3, 'FD');
                
                yPos += 15;
                doc.setFontSize(40);
                doc.setTextColor(255, 255, 255);
                doc.setFont(undefined, 'bold');
                doc.text('62', pageWidth / 2, yPos, { align: 'center' });
                yPos += 8;
                
                doc.setFontSize(14);
                doc.text('MEDIUM RISK', pageWidth / 2, yPos, { align: 'center' });
                yPos += 20;
                
                // Executive Summary
                yPos += 10;
                doc.setFontSize(12);
                doc.setTextColor(...colors.darkGray);
                doc.setFont(undefined, 'bold');
                doc.text('EXECUTIVE SUMMARY', margin, yPos);
                yPos += 7;
                
                doc.setFontSize(9);
                doc.setFont(undefined, 'normal');
                const summary = `This $171M crude oil transaction between a US buyer and Nigerian seller shows several concerning indicators. While no sanctions matches were found, the seller company is not registered in global company databases, 100% upfront payment is requested, and there are infrastructure concerns. Enhanced due diligence is strongly recommended before proceeding.`;
                const summaryLines = doc.splitTextToSize(summary, maxWidth);
                doc.text(summaryLines, margin, yPos);
                yPos += (summaryLines.length * 4.5) + 10;
                
                // Transaction Details
                doc.setFontSize(11);
                doc.setFont(undefined, 'bold');
                doc.text('TRANSACTION DETAILS', margin, yPos);
                yPos += 7;
                
                doc.setFontSize(8);
                doc.setFont(undefined, 'normal');
                
                const details = [
                    ['Document Type:', sampleData.documentType],
                    ['Product:', sampleData.productDescription],
                    ['Quantity:', sampleData.quantity],
                    ['Total Value:', sampleData.totalValue],
                    ['Payment Terms:', sampleData.paymentTerms],
                    ['Report Date:', new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })]
                ];
                
                details.forEach(([label, value]) => {
                    checkSpace(5);
                    doc.setTextColor(...colors.gray);
                    doc.text(label, margin, yPos);
                    doc.setTextColor(...colors.darkGray);
                    const valueLines = doc.splitTextToSize(value, maxWidth - 50);
                    doc.text(valueLines, margin + 50, yPos);
                    yPos += Math.max(4, valueLines.length * 4);
                });
                
                // PAGE 2: PARTIES
                doc.addPage();
                currentPage++;
                addHeader();
                yPos = 25;
                
                doc.setFontSize(12);
                doc.setTextColor(...colors.darkGray);
                doc.setFont(undefined, 'bold');
                doc.text('PARTIES TO TRANSACTION', margin, yPos);
                yPos += 10;
                
                // Buyer
                doc.setFontSize(10);
                doc.setTextColor(...colors.cyan);
                doc.text('BUYER', margin, yPos);
                yPos += 6;
                
                doc.setFontSize(8);
                doc.setFont(undefined, 'normal');
                [
                    ['Company:', sampleData.buyerName],
                    ['Country:', sampleData.buyerCountry],
                    ['Email:', sampleData.buyerEmail],
                    ['Status:', '‚úì Found in OpenCorporates (Delaware, USA)'],
                    ['Risk:', 'LOW']
                ].forEach(([label, value]) => {
                    doc.setTextColor(...colors.gray);
                    doc.text(label, margin, yPos);
                    doc.setTextColor(...colors.darkGray);
                    doc.text(value, margin + 25, yPos);
                    yPos += 4;
                });
                
                yPos += 8;
                
                // Seller
                doc.setFontSize(10);
                doc.setTextColor(...colors.cyan);
                doc.setFont(undefined, 'bold');
                doc.text('SELLER', margin, yPos);
                yPos += 6;
                
                doc.setFontSize(8);
                doc.setFont(undefined, 'normal');
                [
                    ['Company:', sampleData.sellerName],
                    ['Country:', sampleData.sellerCountry],
                    ['Email:', sampleData.sellerEmail],
                    ['Status:', '‚ö† NOT found in OpenCorporates'],
                    ['Risk:', 'ELEVATED']
                ].forEach(([label, value]) => {
                    doc.setTextColor(...colors.gray);
                    doc.text(label, margin, yPos);
                    doc.setTextColor(...colors.darkGray);
                    doc.text(value, margin + 25, yPos);
                    yPos += 4;
                });
                
                yPos += 12;
                
                // Database Verification
                doc.setFontSize(12);
                doc.setTextColor(...colors.darkGray);
                doc.setFont(undefined, 'bold');
                doc.text('DATABASE VERIFICATION RESULTS', margin, yPos);
                yPos += 10;
                
                // Sanctions
                doc.setFontSize(8);
                doc.setTextColor(...colors.gray);
                doc.text('Sanctions & Watchlists (OpenSanctions - OFAC, UN, EU, UK + 300 lists)', margin, yPos);
                yPos += 5;
                
                doc.setTextColor(...colors.green);
                doc.text('‚úì', margin + 3, yPos);
                doc.setTextColor(...colors.darkGray);
                doc.text('NO MATCHES - Both parties clear', margin + 8, yPos);
                yPos += 8;
                
                // Company Registries
                doc.setTextColor(...colors.gray);
                doc.text('Company Registries (OpenCorporates - 200M+ companies, 140 countries)', margin, yPos);
                yPos += 5;
                
                doc.setTextColor(...colors.green);
                doc.text('‚úì', margin + 3, yPos);
                doc.setTextColor(...colors.darkGray);
                doc.text('BUYER: Found (Delaware, USA - Company #2847193)', margin + 8, yPos);
                yPos += 4;
                
                doc.setTextColor(...colors.yellow);
                doc.text('‚ö†', margin + 3, yPos);
                doc.setTextColor(...colors.darkGray);
                doc.text('SELLER: NOT FOUND in global registries', margin + 8, yPos);
                yPos += 8;
                
                // Email Validation
                doc.setTextColor(...colors.gray);
                doc.text('Email & Domain Validation', margin, yPos);
                yPos += 5;
                
                doc.setTextColor(...colors.green);
                doc.text('‚úì', margin + 3, yPos);
                doc.setTextColor(...colors.darkGray);
                doc.text('BUYER: Valid corporate email', margin + 8, yPos);
                yPos += 4;
                
                doc.setTextColor(...colors.yellow);
                doc.text('‚ö†', margin + 3, yPos);
                doc.setTextColor(...colors.darkGray);
                doc.text('SELLER: Email infrastructure concerns', margin + 8, yPos);
                yPos += 12;
                
                // PAGE 3: DETAILED FINDINGS
                doc.addPage();
                currentPage++;
                addHeader();
                yPos = 25;
                
                doc.setFontSize(12);
                doc.setTextColor(...colors.cyan);
                doc.setFont(undefined, 'bold');
                doc.text('DETAILED FINDINGS & RECOMMENDATIONS', pageWidth / 2, yPos, { align: 'center' });
                yPos += 12;
                
                // Finding 1: Company Not Found
                doc.setDrawColor(...colors.yellow);
                doc.line(margin, yPos, margin + 2, yPos);
                yPos += 0.5;
                doc.setFillColor(254, 252, 232);
                doc.rect(margin, yPos - 3, maxWidth, 40, 'F');
                
                yPos += 2;
                doc.setFontSize(9);
                doc.setTextColor(...colors.yellow);
                doc.setFont(undefined, 'bold');
                doc.text('‚ö° MEDIUM RISK', margin + 3, yPos);
                yPos += 5;
                
                doc.setFontSize(10);
                doc.setTextColor(...colors.darkGray);
                doc.text('Company Not Found in Global Registries', margin + 3, yPos);
                yPos += 5;
                
                doc.setFontSize(7);
                doc.setTextColor(...colors.gray);
                doc.setFont(undefined, 'italic');
                doc.text('Source: OpenCorporates (200M+ companies, 140+ jurisdictions)', margin + 3, yPos);
                yPos += 5;
                
                doc.setFont(undefined, 'normal');
                doc.setTextColor(...colors.darkGray);
                const finding1 = 'Nigerian Petroleum Exports Limited was not found in the OpenCorporates global database covering 200M+ companies worldwide.';
                const f1Lines = doc.splitTextToSize(finding1, maxWidth - 6);
                doc.text(f1Lines, margin + 3, yPos);
                yPos += (f1Lines.length * 3.5) + 5;
                
                // Why This Matters
                doc.setFillColor(240, 248, 255);
                doc.roundedRect(margin + 3, yPos, maxWidth - 6, 18, 1, 1, 'F');
                doc.setFontSize(7);
                doc.setTextColor(...colors.cyan);
                doc.setFont(undefined, 'bold');
                doc.text('üí° WHY THIS MATTERS', margin + 6, yPos + 3);
                doc.setFont(undefined, 'normal');
                doc.setTextColor(...colors.darkGray);
                const why1 = 'OpenCorporates covers 200M+ companies worldwide. If they\'re not found, it means: (1) Very new company (< 6 months), (2) Operating informally/illegally, (3) Incorrect company name provided, or (4) Shell company with minimal public presence. Legitimate established businesses should appear here.';
                const w1Lines = doc.splitTextToSize(why1, maxWidth - 12);
                doc.text(w1Lines, margin + 6, yPos + 6);
                yPos += 20;
                
                // Recommended Actions
                doc.setFillColor(254, 252, 232);
                doc.roundedRect(margin + 3, yPos, maxWidth - 6, 18, 1, 1, 'F');
                doc.setFontSize(7);
                doc.setTextColor(...colors.yellow);
                doc.setFont(undefined, 'bold');
                doc.text('üìã RECOMMENDED ACTIONS', margin + 6, yPos + 3);
                doc.setFont(undefined, 'normal');
                doc.setTextColor(...colors.darkGray);
                [
                    '‚Ä¢ Request official company registration documents',
                    '‚Ä¢ Verify company age - if new, extra scrutiny needed',
                    '‚Ä¢ Ask for audited financial statements',
                    '‚Ä¢ Request trade references from established partners'
                ].forEach((action, i) => {
                    doc.text(action, margin + 6, yPos + 6 + (i * 3));
                });
                yPos += 25;
                
                // Finding 2: Payment Terms
                doc.setDrawColor(...colors.red);
                doc.line(margin, yPos, margin + 2, yPos);
                yPos += 0.5;
                doc.setFillColor(254, 242, 242);
                doc.rect(margin, yPos - 3, maxWidth, 35, 'F');
                
                yPos += 2;
                doc.setFontSize(9);
                doc.setTextColor(...colors.red);
                doc.setFont(undefined, 'bold');
                doc.text('‚ö†Ô∏è HIGH RISK', margin + 3, yPos);
                yPos += 5;
                
                doc.setFontSize(10);
                doc.setTextColor(...colors.darkGray);
                doc.text('100% Upfront Payment Requested', margin + 3, yPos);
                yPos += 5;
                
                doc.setFontSize(7);
                doc.setTextColor(...colors.gray);
                doc.setFont(undefined, 'italic');
                doc.text('Source: Contract Analysis', margin + 3, yPos);
                yPos += 5;
                
                doc.setFont(undefined, 'normal');
                doc.setTextColor(...colors.darkGray);
                const finding2 = 'Contract requires 100% advance payment ($171M) via wire transfer before shipment or inspection.';
                const f2Lines = doc.splitTextToSize(finding2, maxWidth - 6);
                doc.text(f2Lines, margin + 3, yPos);
                yPos += (f2Lines.length * 3.5) + 5;
                
                // Why This Matters
                doc.setFillColor(240, 248, 255);
                doc.roundedRect(margin + 3, yPos, maxWidth - 6, 15, 1, 1, 'F');
                doc.setFontSize(7);
                doc.setTextColor(...colors.cyan);
                doc.setFont(undefined, 'bold');
                doc.text('üí° WHY THIS MATTERS', margin + 6, yPos + 3);
                doc.setFont(undefined, 'normal');
                doc.setTextColor(...colors.darkGray);
                const why2 = 'Standard industry practice is 10-30% deposit with balance on delivery/inspection. 100% upfront payment for $171M is extremely unusual and exposes buyer to total loss if seller disappears or product quality issues arise. This is a common structure in advance fee fraud schemes.';
                const w2Lines = doc.splitTextToSize(why2, maxWidth - 12);
                doc.text(w2Lines, margin + 6, yPos + 6);
                yPos += 17;
                
                // Recommended Actions
                doc.setFillColor(254, 242, 242);
                doc.roundedRect(margin + 3, yPos, maxWidth - 6, 15, 1, 1, 'F');
                doc.setFontSize(7);
                doc.setTextColor(...colors.red);
                doc.setFont(undefined, 'bold');
                doc.text('üìã RECOMMENDED ACTIONS', margin + 6, yPos + 3);
                doc.setFont(undefined, 'normal');
                doc.setTextColor(...colors.darkGray);
                [
                    '‚Ä¢ Negotiate escrow arrangement with independent third party',
                    '‚Ä¢ Request payment against confirmed inspection and loading',
                    '‚Ä¢ Consider Letter of Credit instead of wire transfer',
                    '‚Ä¢ Do NOT proceed with 100% advance payment'
                ].forEach((action, i) => {
                    doc.text(action, margin + 6, yPos + 6 + (i * 3));
                });
                yPos += 20;
                
                // PAGE 4: RISK METHODOLOGY & CONTACT
                doc.addPage();
                currentPage++;
                addHeader();
                yPos = 25;
                
                doc.setFontSize(12);
                doc.setTextColor(...colors.darkGray);
                doc.setFont(undefined, 'bold');
                doc.text('RISK SCORING METHODOLOGY', margin, yPos);
                yPos += 10;
                
                doc.setFontSize(8);
                doc.setFont(undefined, 'normal');
                
                const methodology = `Our risk scoring algorithm evaluates transactions on a 0-100 scale:

‚Ä¢ GREEN (86-100): Low risk - Standard due diligence recommended
‚Ä¢ YELLOW (60-85): Medium risk - Enhanced due diligence required  
‚Ä¢ RED (31-59): High risk - Proceed with extreme caution
‚Ä¢ BLACK (0-30): Critical risk - Do not proceed

Points are deducted for red flags including:
- Missing company information (-15)
- Unverified parties (-15)
- Unusual payment terms (-15)
- Email/domain issues (-10-15)
- Sanctions matches (instant FAIL = 0)

This report scored 62/100 (MEDIUM RISK) due to:
- Seller not found in registries (-15)
- 100% upfront payment terms (-15)
- Email infrastructure concerns (-8)`;

                const methLines = doc.splitTextToSize(methodology, maxWidth);
                doc.setTextColor(...colors.darkGray);
                doc.text(methLines, margin, yPos);
                yPos += (methLines.length * 3.5) + 15;
                
                // Contact Info
                doc.setFontSize(12);
                doc.setTextColor(...colors.cyan);
                doc.setFont(undefined, 'bold');
                doc.text('QUESTIONS? CONTACT US', margin, yPos);
                yPos += 8;
                
                doc.setFontSize(8);
                doc.setFont(undefined, 'normal');
                doc.setTextColor(...colors.darkGray);
                [
                    ['Company:', 'Claduta Corp'],
                    ['Email:', 'info@cladutacorp.com'],
                    ['WhatsApp:', '+1 (727) 623-2652'],
                    ['Website:', 'dudediligence.pro']
                ].forEach(([label, value]) => {
                    doc.setTextColor(...colors.gray);
                    doc.text(label, margin, yPos);
                    doc.setTextColor(...colors.darkGray);
                    doc.text(value, margin + 25, yPos);
                    yPos += 4;
                });
                
                yPos += 10;
                
                // Disclaimer
                doc.setFillColor(245, 245, 245);
                doc.roundedRect(margin, yPos, maxWidth, 25, 2, 2, 'F');
                yPos += 4;
                
                doc.setFontSize(7);
                doc.setTextColor(...colors.gray);
                doc.setFont(undefined, 'italic');
                const disclaimer = 'DISCLAIMER: This report is provided for informational purposes only and represents a point-in-time analysis. It should not be considered legal or financial advice. Dude Diligence Pro makes no guarantees about the accuracy or completeness of information obtained from third-party sources. Users are responsible for conducting their own due diligence and should consult legal and compliance professionals before making business decisions. This is a SAMPLE REPORT for demonstration purposes.';
                const disclaimerLines = doc.splitTextToSize(disclaimer, maxWidth - 4);
                doc.text(disclaimerLines, margin + 2, yPos);
                
                // Footer
                yPos = pageHeight - 10;
                doc.setFontSize(7);
                doc.setTextColor(...colors.lightGray);
                doc.setFont(undefined, 'normal');
                doc.text('SAMPLE REPORT - Generated for demonstration purposes', pageWidth / 2, yPos, { align: 'center' });
                doc.text(`Page ${currentPage} of ${currentPage}`, pageWidth - margin, yPos, { align: 'right' });
                
                // Save PDF
                doc.save('DDP-Sample-Report.pdf');
                statusEl.textContent = '‚úÖ PDF downloaded! Check your Downloads folder.';
                statusEl.style.color = '#10b981';
                
            } catch (error) {
                console.error('Error generating PDF:', error);
                statusEl.textContent = '‚ùå Error: ' + error.message;
                statusEl.style.color = '#ef4444';
            }
        }
        
        // Auto-generate on page load (optional)
        // window.onload = () => generateSampleReport();
    </script>
</body>
</html>
