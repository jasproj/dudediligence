<!DOCTYPE html>
<html>
<head>
<title>Hero Rotation Test</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-950 text-white p-8">

<h1 class="text-2xl mb-8">Hero Rotation Test</h1>

<!-- Hero Container -->
<div id="heroVariation" class="border border-cyan-500 p-8 mb-4">
<!-- Will be filled by JavaScript -->
</div>

<!-- Bullets Container -->
<ul id="heroBullets" class="space-y-2">
<!-- Will be filled by JavaScript -->
</ul>

<!-- Debug Info -->
<div class="mt-8 p-4 bg-slate-800 rounded">
<h2 class="font-bold mb-2">Debug Info:</h2>
<div id="debugInfo"></div>
</div>

<!-- Buttons to test -->
<div class="mt-4 space-x-2">
<button onclick="testVariation(0)" class="px-4 py-2 bg-cyan-500 rounded">Test Variation A</button>
<button onclick="testVariation(1)" class="px-4 py-2 bg-cyan-500 rounded">Test Variation B</button>
<button onclick="testVariation(2)" class="px-4 py-2 bg-cyan-500 rounded">Test Variation C</button>
<button onclick="localStorage.clear(); location.reload();" class="px-4 py-2 bg-red-500 rounded">Clear & Reload</button>
</div>

<script>
// 3 HERO VARIATIONS
const heroVariations = [
  {
    headline: "Stop Losing Deals to Document Fraud",
    subheadline: "Verify commodity traders in 10 secondsâ€”before you waste another call",
    bullets: [
      { text: "<strong>Bullet 1A:</strong> Content A" },
      { text: "<strong>Bullet 2A:</strong> Content A" }
    ]
  },
  {
    headline: "$2.3M in Fraud Stopped This Month Alone",
    subheadline: "Join 1,000+ brokers who verify every deal before signing anything",
    bullets: [
      { text: "<strong>Bullet 1B:</strong> Content B" },
      { text: "<strong>Bullet 2B:</strong> Content B" }
    ]
  },
  {
    headline: "That $50M ICPO You're About to Sign? It's a Scam.",
    subheadline: "We've seen this exact document 47 times. Different seller every time.",
    bullets: [
      { text: "<strong>Bullet 1C:</strong> Content C" },
      { text: "<strong>Bullet 2C:</strong> Content C" }
    ]
  }
];

function getVariationIndex() {
  let sessionVariation = sessionStorage.getItem('ddp_hero_variation');
  
  if (sessionVariation !== null) {
    return parseInt(sessionVariation);
  }
  
  let visitCount = parseInt(localStorage.getItem('ddp_visit_count') || '0');
  visitCount++;
  localStorage.setItem('ddp_visit_count', visitCount.toString());
  
  const variationIndex = visitCount % 3;
  sessionStorage.setItem('ddp_hero_variation', variationIndex.toString());
  
  return variationIndex;
}

function renderHeroVariation() {
  const variationIndex = getVariationIndex();
  const variation = heroVariations[variationIndex];
  
  console.log('Rendering variation:', variationIndex, variation);
  
  const heroContainer = document.getElementById('heroVariation');
  const bulletsContainer = document.getElementById('heroBullets');
  const debugInfo = document.getElementById('debugInfo');
  
  if (!heroContainer) {
    console.error('heroVariation not found!');
    return;
  }
  
  // Build bullets
  const bulletsHTML = variation.bullets.map(b => `
    <li class="flex items-start gap-2">
      <span class="mt-1 h-1.5 w-1.5 rounded-full bg-cyan-400"></span>
      <span>${b.text}</span>
    </li>
  `).join('');
  
  // Inject content
  heroContainer.innerHTML = `
    <h1 class="text-3xl font-bold text-white mb-3">${variation.headline}</h1>
    <p class="text-xl text-cyan-400 font-semibold">${variation.subheadline}</p>
  `;
  
  if (bulletsContainer) {
    bulletsContainer.innerHTML = bulletsHTML;
  }
  
  // Debug info
  if (debugInfo) {
    debugInfo.innerHTML = `
      <p>Visit Count: ${localStorage.getItem('ddp_visit_count')}</p>
      <p>Current Variation: ${variationIndex} (${variationIndex === 0 ? 'A' : variationIndex === 1 ? 'B' : 'C'})</p>
      <p>Session Variation: ${sessionStorage.getItem('ddp_hero_variation')}</p>
      <p>Headline: ${variation.headline.substring(0, 50)}...</p>
    `;
  }
  
  console.log('âœ… Variation rendered successfully');
}

function testVariation(index) {
  sessionStorage.setItem('ddp_hero_variation', index.toString());
  renderHeroVariation();
}

// Run immediately
console.log('ðŸš€ Starting hero render...');
console.log('DOM ready state:', document.readyState);
renderHeroVariation();
console.log('âœ… Hero render complete');

</script>

</body>
</html>
