<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />

<title>DD -- Dude Diligence | AI Verify Buyers & Sellers</title>

<!-- Favicon -->
<link rel="icon" type="image/x-icon" href="favicon.ico" />
<link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />

<!-- Social Preview Metadata -->
<meta property="og:title" content="DD -- Dude Diligence" />
<meta property="og:description" content="Instant due diligence reports for commodities brokers. AI Verify Buyers and Sellers before you waste another call." />
<meta property="og:image" content="https://dudediligence.pro/og-image.jpg" />
<meta property="og:url" content="https://dudediligence.pro" />
<meta name="twitter:card" content="summary_large_image" />

<meta name="description" content="Instant due diligence reports for commodities brokers. AI Verify Buyers and Sellers before you waste another call." />

<meta name="viewport" content="width=device-width, initial-scale=1" />
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>

<style>
body {
background: radial-gradient(circle at top, #0f172a 0%, #020617 60%, #000 100%);
position: relative;
overflow-x: hidden;
}

/* Animated gradient background */
body::before {
content: '';
position: fixed;
top: -50%;
left: -50%;
width: 200%;
height: 200%;
background: radial-gradient(circle, rgba(6,182,212,0.03) 0%, transparent 50%),
            radial-gradient(circle, rgba(139,92,246,0.02) 0%, transparent 50%);
animation: moveGradient 20s ease infinite;
pointer-events: none;
z-index: 0;
}

@keyframes moveGradient {
  0%, 100% {
    transform: translate(0, 0);
  }
  25% {
    transform: translate(10%, 10%);
  }
  50% {
    transform: translate(0%, 20%);
  }
  75% {
    transform: translate(-10%, 10%);
  }
}

/* Ensure content stays above animated background */
body > div {
position: relative;
z-index: 1;
}

/* Animated scanning effect for bot eye */
@keyframes scan {
  0%, 100% { opacity: 0.3; }
  50% { opacity: 1; }
}

.bot-eye-glow {
  animation: scan 2s ease-in-out infinite;
}
</style>
</head>

<body class="min-h-screen text-slate-100 antialiased">
<div class="min-h-screen flex flex-col">

<!-- HEADER -->
<header class="border-b border-slate-800/80 bg-black/60 backdrop-blur">
<div class="mx-auto max-w-6xl px-4 py-4 flex items-center justify-between">
<div class="flex items-center gap-2">

<!-- DD LOGO -->
<div class="h-9 w-9 rounded-xl bg-cyan-500/20 border border-cyan-400/40 flex items-center justify-center">
<span class="text-cyan-300 font-semibold text-lg">DD</span>
</div>

<div>
<div class="flex items-center gap-2">
<span class="font-semibold text-slate-50 tracking-tight">Dude Diligence</span>
<span class="text-[10px] uppercase tracking-[0.18em] text-slate-500 border border-slate-700/80 rounded px-1.5 py-[2px]">
AI Verify
</span>
</div>
<p class="text-xs text-slate-400">
Instant due diligence reports for commodities brokers
</p>
</div>
</div>

<!-- Pay with Crypto Button -->
<div class="flex items-center gap-4">
<a href="how-it-works.html" class="text-sm text-slate-400 hover:text-cyan-400 transition font-medium">
How It Works
</a>
<button onclick="openCryptoModal()" class="flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-r from-orange-500 to-yellow-500 text-slate-900 font-semibold text-sm hover:from-orange-600 hover:to-yellow-600 transition shadow-lg">
<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
<path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.562 14.813h-2.094v2.094h-2.093v-2.094H9.562v-2.094h3.813V9.188H9.562V7.093h3.813V5h2.093v2.093h2.094v2.094h-2.094v3.532h2.094v2.094z"/>
</svg>
Pay with Crypto
</button>
</div>
</div>
</header>

<!-- MAIN -->
<main class="flex-1">
<section class="mx-auto max-w-6xl px-4 py-10 md:py-14">
<div class="grid gap-10 lg:grid-cols-[1.3fr,minmax(0,1fr)] items-start">

<!-- LEFT SIDE -->
<div>
<h1 class="text-3xl md:text-4xl lg:text-5xl font-semibold tracking-tight text-slate-50 mb-4">
AI verify Buyers and Sellers before you waste another call.
</h1>

<p class="mt-4 text-sm md:text-base text-slate-300 max-w-xl">
Upload an LOI, ICPO, KYC pack, mandate letter or other supporting documents. Dude Diligence reads it, checks the company,
email, volume, document patterns, and public risk signals, then gives you a clear risk score and next steps.
</p>

<ul class="mt-6 space-y-2 text-sm text-slate-300">
<li class="flex items-start gap-2">
<span class="mt-1 h-1.5 w-1.5 rounded-full bg-cyan-400"></span>
<span><strong>Instant Risk Scoring:</strong> 0â€“100 score with color-coded risk levels in seconds.</span>
</li>
<li class="flex items-start gap-2">
<span class="mt-1 h-1.5 w-1.5 rounded-full bg-cyan-400"></span>
<span><strong>Fraud Detection:</strong> Flags free emails, fake volumes, upfront payment scams, and recycled LOIs.</span>
</li>
<li class="flex items-start gap-2">
<span class="mt-1 h-1.5 w-1.5 rounded-full bg-cyan-400"></span>
<span><strong>Document Fingerprinting:</strong> Catches serial scammers reusing the same documents.</span>
</li>
<li class="flex items-start gap-2">
<span class="mt-1 h-1.5 w-1.5 rounded-full bg-cyan-400"></span>
<span><strong>Sanctions Screening:</strong> Cross-checks against OFAC, UN, and EU sanctions lists.</span>
</li>
<li class="flex items-start gap-2">
<span class="mt-1 h-1.5 w-1.5 rounded-full bg-cyan-400"></span>
<span><strong>AI Data Extraction:</strong> Automatically pulls buyer, seller, commodity, pricing, and terms.</span>
</li>
<li class="flex items-start gap-2">
<span class="mt-1 h-1.5 w-1.5 rounded-full bg-cyan-400"></span>
<span><strong>Clear Next Steps:</strong> Know immediately whether to proceed or walk away.</span>
</li>
<li class="flex items-start gap-2">
<span class="mt-1 h-1.5 w-1.5 rounded-full bg-cyan-400"></span>
<span><strong>Export Reports:</strong> Download JSON reports for compliance and legal review.</span>
</li>
<li class="flex items-start gap-2">
<span class="mt-1 h-1.5 w-1.5 rounded-full bg-cyan-400"></span>
<span>ğŸ’° <strong>Crypto Payments:</strong> Pay with BTC, ETH, USDT, and moreâ€”no credit card needed.</span>
</li>
</ul>
</div>

<!-- RIGHT SIDE -->
<div class="space-y-4">

<!-- UPLOAD AREA -->
<div class="rounded-2xl border border-slate-800 bg-slate-950/70 backdrop-blur shadow-lg shadow-cyan-500/10">
<div class="px-5 py-4 border-b border-slate-800 flex items-center justify-between">
<div>
<h2 class="text-sm font-semibold text-slate-100">Run Dude Diligence</h2>
<p class="text-xs text-slate-400">Upload LOI, ICPO, or combined PDFs.</p>
</div>
<span class="rounded-full bg-slate-900 px-3 py-1 text-[11px] text-slate-300 border border-slate-700">
1 credit per check
</span>
</div>

<div class="px-5 pt-4 pb-5 space-y-4">

<label class="block">
<span class="text-xs font-medium text-slate-300">Document</span>
<div id="dropzone"
class="mt-2 flex flex-col items-center justify-center rounded-xl border border-dashed border-slate-700 bg-slate-900/60 px-4 py-6 text-center text-xs text-slate-400 cursor-pointer hover:border-cyan-400/70 hover:bg-slate-900 transition">
<span class="mb-2 text-slate-200 font-medium" id="dropzoneText">Click to upload</span>
<span class="text-[11px] text-slate-500">PDF, TXT, max 10 MB.</span>
<input id="fileInput" type="file" accept=".pdf,.txt" class="hidden" />
</div>
</label>

<div class="grid grid-cols-2 gap-3 text-xs">
<div>
<label class="block text-slate-300 mb-1">Commodity</label>
<select id="commodity"
class="w-full rounded-lg border border-slate-700 bg-slate-900/80 px-2.5 py-1.5 text-xs text-slate-100 cursor-pointer">
<option value="">Select commodity...</option>
<option value="ICUMSA 45 Sugar">ICUMSA 45 Sugar</option>
<option value="Soybean Oil">Soybean Oil</option>
<option value="Crude Oil">Crude Oil</option>
<option value="Wheat">Wheat</option>
<option value="Corn">Corn</option>
<option value="Rice">Rice</option>
<option value="Gold">Gold</option>
<option value="Copper">Copper</option>
<option value="Iron Ore">Iron Ore</option>
<option value="Coal">Coal</option>
<option value="Natural Gas">Natural Gas</option>
<option value="Other">Other</option>
</select>
</div>
<div>
<label class="block text-slate-300 mb-1">Volume</label>
<select id="volume"
class="w-full rounded-lg border border-slate-700 bg-slate-900/80 px-2.5 py-1.5 text-xs text-slate-100 cursor-pointer">
<option value="">Select volume range...</option>
<option value="0-1000 MT">0 - 1,000 MT</option>
<option value="1000-10000 MT">1,000 - 10,000 MT</option>
<option value="10000-50000 MT">10,000 - 50,000 MT</option>
<option value="Over 50000 MT">Over 50,000 MT</option>
</select>
</div>
</div>

<button onclick="runDiligence()"
class="w-full mt-2 inline-flex items-center justify-center rounded-xl bg-cyan-500 px-3 py-2 text-xs font-semibold text-slate-900 hover:bg-cyan-400 transition">
Run Dude Diligence
</button>

<p id="statusMessage" class="text-[11px] text-slate-500 h-4"></p>
</div>
</div>

<!-- REVIEW FORM SECTION (appears after AI extraction) -->
<div id="reviewFormSection" class="hidden rounded-2xl border border-cyan-500/60 bg-slate-950/80 backdrop-blur shadow-lg shadow-cyan-500/10 mt-6">
<div class="px-5 py-4 border-b border-slate-800">
<h2 class="text-sm font-semibold text-cyan-400">âœï¸ Review & Edit Extracted Data</h2>
<p class="text-xs text-slate-400 mt-1">AI extracted the data below. Please review and add any missing information before finalizing.</p>
</div>

<div class="px-5 py-4 space-y-4">
<!-- Company Information -->
<div class="bg-slate-900/60 p-4 rounded-lg border border-slate-800">
<h3 class="text-xs font-semibold text-slate-300 mb-3">ğŸ¢ Company Information</h3>
<div class="grid gap-3">
<div>
<label class="block text-[11px] text-slate-500 mb-1">Company Name</label>
<input type="text" id="edit_company_name" 
class="w-full bg-slate-800 border border-slate-700 rounded px-3 py-2 text-sm text-slate-100 focus:outline-none focus:border-cyan-500 transition"
placeholder="Not specified">
<p class="text-[10px] text-slate-500 mt-1" id="status_company_name"></p>
</div>
<div>
<label class="block text-[11px] text-slate-500 mb-1">Country</label>
<input type="text" id="edit_country" 
class="w-full bg-slate-800 border border-slate-700 rounded px-3 py-2 text-sm text-slate-100 focus:outline-none focus:border-cyan-500 transition"
placeholder="Not specified">
<p class="text-[10px] text-slate-500 mt-1" id="status_country"></p>
</div>
</div>
</div>

<!-- Representative Information -->
<div class="bg-slate-900/60 p-4 rounded-lg border border-slate-800">
<h3 class="text-xs font-semibold text-slate-300 mb-3">ğŸ‘¤ Representative Information</h3>
<div class="grid gap-3">
<div>
<label class="block text-[11px] text-slate-500 mb-1">Representative Name</label>
<input type="text" id="edit_representative" 
class="w-full bg-slate-800 border border-slate-700 rounded px-3 py-2 text-sm text-slate-100 focus:outline-none focus:border-cyan-500 transition"
placeholder="Not specified">
<p class="text-[10px] text-slate-500 mt-1" id="status_representative"></p>
</div>
<div>
<label class="block text-[11px] text-slate-500 mb-1">Email Address</label>
<input type="email" id="edit_email" 
class="w-full bg-slate-800 border border-slate-700 rounded px-3 py-2 text-sm text-slate-100 focus:outline-none focus:border-cyan-500 transition"
placeholder="Not specified">
<p class="text-[10px] text-slate-500 mt-1" id="status_email"></p>
</div>
</div>
</div>

<!-- Banking Information -->
<div class="bg-slate-900/60 p-4 rounded-lg border border-slate-800">
<h3 class="text-xs font-semibold text-slate-300 mb-3">ğŸ¦ Banking Information</h3>
<div class="grid gap-3">
<div>
<label class="block text-[11px] text-slate-500 mb-1">Bank Name</label>
<input type="text" id="edit_bank_name" 
class="w-full bg-slate-800 border border-slate-700 rounded px-3 py-2 text-sm text-slate-100 focus:outline-none focus:border-cyan-500 transition"
placeholder="Not specified">
<p class="text-[10px] text-slate-500 mt-1" id="status_bank_name"></p>
</div>
<div>
<label class="block text-[11px] text-slate-500 mb-1">Source of Funds</label>
<input type="text" id="edit_source_funds" 
class="w-full bg-slate-800 border border-slate-700 rounded px-3 py-2 text-sm text-slate-100 focus:outline-none focus:border-cyan-500 transition"
placeholder="Not specified">
<p class="text-[10px] text-slate-500 mt-1" id="status_source_funds"></p>
</div>
</div>
</div>

<!-- Trading Information -->
<div class="bg-slate-900/60 p-4 rounded-lg border border-slate-800">
<h3 class="text-xs font-semibold text-slate-300 mb-3">ğŸ“¦ Trading Information</h3>
<div class="grid gap-3">
<div>
<label class="block text-[11px] text-slate-500 mb-1">Commodity</label>
<input type="text" id="edit_commodity" 
class="w-full bg-slate-800 border border-slate-700 rounded px-3 py-2 text-sm text-slate-100 focus:outline-none focus:border-cyan-500 transition"
placeholder="Not specified">
</div>
<div>
<label class="block text-[11px] text-slate-500 mb-1">Quantity</label>
<input type="text" id="edit_quantity" 
class="w-full bg-slate-800 border border-slate-700 rounded px-3 py-2 text-sm text-slate-100 focus:outline-none focus:border-cyan-500 transition"
placeholder="Not specified">
</div>
<div>
<label class="block text-[11px] text-slate-500 mb-1">Price</label>
<input type="text" id="edit_price" 
class="w-full bg-slate-800 border border-slate-700 rounded px-3 py-2 text-sm text-slate-100 focus:outline-none focus:border-cyan-500 transition"
placeholder="Not specified">
</div>
</div>
</div>

<!-- Action Buttons -->
<div class="flex gap-3 pt-2">
<button onclick="skipReview()" class="flex-1 px-4 py-3 rounded-lg bg-slate-800 text-slate-300 text-sm font-semibold hover:bg-slate-700 transition border border-slate-700">
Skip & Use AI Data
</button>
<button onclick="finalizeReport()" class="flex-1 px-4 py-3 rounded-lg bg-gradient-to-r from-cyan-500 to-blue-500 text-white text-sm font-semibold hover:from-cyan-600 hover:to-blue-600 transition shadow-lg">
âœ“ Finalize Report
</button>
</div>

<p class="text-center text-[10px] text-slate-500 mt-3">ğŸ’¡ Complete data = more accurate risk score</p>
</div>
</div>

<!-- RESULTS PANEL - ENHANCED VISUAL REPORT -->
<div class="rounded-2xl border border-slate-800 bg-slate-950/80 backdrop-blur shadow-lg shadow-cyan-500/5">

<!-- Header with Risk Badge -->
<div class="px-5 py-4 border-b border-slate-800">
<div class="flex items-center justify-between mb-3">
<h2 class="text-sm font-semibold text-slate-100">ğŸ¯ Risk Assessment Report</h2>
<span id="timestamp" class="text-[10px] text-slate-500"></span>
</div>
<div class="flex items-center justify-center">
<span id="riskBadge" class="rounded-full border border-slate-700 bg-slate-900 px-4 py-2 text-sm font-bold text-slate-300 shadow-lg">
Waiting...
</span>
</div>
</div>

<!-- Score Progress Bar -->
<div class="px-5 py-6 border-b border-slate-800 bg-gradient-to-br from-slate-900/40 to-transparent">
<div class="text-center mb-4">
<div class="text-4xl font-bold text-slate-50 mb-1" id="score">-- / 100</div>
<div class="text-[10px] uppercase tracking-wider text-slate-500">Overall Risk Score</div>
</div>
<div class="w-full h-3 bg-slate-800 rounded-full overflow-hidden">
<div id="scoreBar" class="h-full transition-all duration-1000 ease-out" style="width: 0%"></div>
</div>
<div id="userVerifiedBadge" class="hidden text-center mt-3">
<span class="inline-flex items-center gap-1 px-3 py-1 rounded-full bg-cyan-500/20 border border-cyan-400/40 text-[10px] font-semibold text-cyan-300">
âœ“ USER-VERIFIED DATA
</span>
</div>
</div>

<!-- Score Breakdown -->
<div id="scoreBreakdown" class="hidden px-5 py-4 border-b border-slate-800">
<div class="text-[11px] font-semibold text-slate-400 mb-3">SCORE BREAKDOWN</div>
<div class="grid grid-cols-3 gap-3">
<div class="bg-slate-900/60 rounded-lg p-3 border border-slate-800">
<div class="text-[10px] text-slate-500 mb-1">ğŸ¢ Company Info</div>
<div class="text-lg font-bold text-slate-100" id="companyScore">--/30</div>
</div>
<div class="bg-slate-900/60 rounded-lg p-3 border border-slate-800">
<div class="text-[10px] text-slate-500 mb-1">ğŸ“Š Data Quality</div>
<div class="text-lg font-bold text-slate-100" id="dataScore">--/40</div>
</div>
<div class="bg-slate-900/60 rounded-lg p-3 border border-slate-800">
<div class="text-[10px] text-slate-500 mb-1">âœ“ Verification</div>
<div class="text-lg font-bold text-slate-100" id="verificationScore">--/30</div>
</div>
</div>
</div>

<!-- Summary -->
<div class="px-5 py-4 border-b border-slate-800">
<div class="text-[11px] font-semibold text-slate-400 mb-2">SUMMARY</div>
<p id="summary" class="text-xs text-slate-200 leading-relaxed">Upload a document to begin.</p>
</div>

<!-- Critical Issues -->
<div id="criticalSection" class="hidden px-5 py-4 border-b border-slate-800 bg-rose-500/5">
<div class="flex items-center gap-2 mb-3">
<span class="text-[11px] font-semibold text-rose-400">ğŸš© CRITICAL ISSUES</span>
<span id="criticalCount" class="text-[10px] px-2 py-0.5 rounded-full bg-rose-500/20 text-rose-300">0</span>
</div>
<ul id="flagsList" class="space-y-2">
<li class="text-slate-500 text-[11px]">None detected.</li>
</ul>
</div>

<!-- Positive Signals -->
<div id="positiveSection" class="hidden px-5 py-4 border-b border-slate-800 bg-emerald-500/5">
<div class="flex items-center gap-2 mb-3">
<span class="text-[11px] font-semibold text-emerald-400">âœ… POSITIVE SIGNALS</span>
<span id="positiveCount" class="text-[10px] px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-300">0</span>
</div>
<ul id="positiveList" class="space-y-2">
<li class="text-slate-500 text-[11px]">None detected.</li>
</ul>
</div>

<!-- Parties Involved Section (NEW!) -->
<div id="partiesSection" class="hidden px-5 py-4 border-b border-slate-800">
<div class="text-[11px] font-semibold text-slate-400 mb-3">ğŸ‘¥ PARTIES INVOLVED</div>
<div id="partiesList" class="space-y-3">
<!-- Dynamically populated -->
</div>
</div>

<!-- Extracted Data (Collapsible) -->
<div id="extractedDataSection" class="hidden px-5 py-4 border-b border-slate-800">
<button onclick="toggleExtractedData()" class="w-full flex items-center justify-between text-[11px] font-semibold text-slate-400 hover:text-cyan-400 transition">
<span>ğŸ“‹ EXTRACTED DATA</span>
<span id="extractedToggle">â–¼</span>
</button>
<div id="extractedDataContent" class="hidden mt-3 space-y-2 text-[11px]">
<div class="grid grid-cols-2 gap-2">
<div class="bg-slate-900/60 rounded p-2">
<div class="text-[10px] text-slate-500">Company</div>
<div class="text-slate-200" id="extractedCompany">--</div>
</div>
<div class="bg-slate-900/60 rounded p-2">
<div class="text-[10px] text-slate-500">Country</div>
<div class="text-slate-200" id="extractedCountry">--</div>
</div>
<div class="bg-slate-900/60 rounded p-2">
<div class="text-[10px] text-slate-500">Commodity</div>
<div class="text-slate-200" id="extractedCommodity">--</div>
</div>
<div class="bg-slate-900/60 rounded p-2">
<div class="text-[10px] text-slate-500">Quantity</div>
<div class="text-slate-200" id="extractedQuantity">--</div>
</div>
</div>
</div>
</div>

<!-- Document Security -->
<div id="fingerprintSection" class="hidden px-5 py-4 border-b border-slate-800">
<div class="text-[11px] font-semibold text-slate-400 mb-3">ğŸ” DOCUMENT SECURITY</div>
<div class="bg-slate-900/60 rounded-lg p-3 border border-slate-800">
<div class="text-[10px] text-slate-500 mb-1">SHA-256 Fingerprint</div>
<p id="fingerprintHash" class="text-[10px] font-mono text-slate-400 truncate mb-2"></p>
<p id="fingerprintStatus" class="text-[11px]"></p>
</div>
</div>

<!-- Recommended Actions -->
<div id="actionsSection" class="hidden px-5 py-4 border-b border-slate-800">
<div class="text-[11px] font-semibold text-slate-400 mb-3">ğŸ’¼ RECOMMENDED ACTIONS</div>
<ul id="nextStepsList" class="space-y-2">
<li class="text-slate-500 text-[11px]">None yet.</li>
</ul>
</div>

<!-- Export Buttons -->
<div class="px-5 py-4">
<div class="flex gap-2">
<button id="exportPdfBtn" onclick="exportPdfReport()" class="hidden flex-1 inline-flex items-center justify-center gap-2 rounded-lg bg-gradient-to-r from-rose-500 to-orange-500 px-4 py-3 text-xs font-semibold text-white hover:from-rose-600 hover:to-orange-600 transition shadow-lg">
ğŸ“„ Export PDF
</button>
<button id="exportBtn" onclick="exportReport()" class="hidden flex-1 inline-flex items-center justify-center gap-2 rounded-lg bg-slate-800 px-4 py-3 text-xs font-semibold text-slate-300 hover:bg-slate-700 transition border border-slate-700">
ğŸ“Š Export JSON
</button>
</div>
</div>

</div>

</div>
</div>
</section>

<!-- TRUST BADGES - AUTO-SCROLLING CAROUSEL -->
<section class="border-t border-slate-800/80 bg-gradient-to-b from-slate-950/80 to-slate-900/40 py-12 overflow-hidden">
<div class="mx-auto max-w-6xl px-4">
<div class="text-center mb-8">
<p class="text-xs uppercase tracking-wider text-cyan-400 font-semibold mb-2">ğŸ”’ 15+ International Data Sources</p>
<p class="text-[10px] text-slate-500">Real-time verification across sanctions, corporate registries, and enforcement databases</p>
</div>

<!-- Auto-scrolling badge carousel -->
<div class="badge-carousel-container mb-6">
<div class="badge-carousel">
<!-- Sanctions Databases -->
<div class="badge-item">
<div class="flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-br from-cyan-500/20 to-blue-500/20 border border-cyan-400/40 shadow-lg shadow-cyan-500/10 whitespace-nowrap">
<svg class="w-5 h-5 text-cyan-400 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0L3 7v9c0 5.25 3.75 10.17 9 11.25 5.25-1.08 9-6 9-11.25V7L12 0zm-2 16l-4-4 1.41-1.41L10 13.17l6.59-6.59L18 8l-8 8z"/></svg>
<span class="text-[11px] font-bold text-cyan-300">OFAC SDN List</span>
</div>
</div>
<div class="badge-item">
<div class="flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-br from-blue-500/20 to-purple-500/20 border border-blue-400/40 shadow-lg shadow-blue-500/10 whitespace-nowrap">
<svg class="w-5 h-5 text-blue-400 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0L3 7v9c0 5.25 3.75 10.17 9 11.25 5.25-1.08 9-6 9-11.25V7L12 0zm-2 16l-4-4 1.41-1.41L10 13.17l6.59-6.59L18 8l-8 8z"/></svg>
<span class="text-[11px] font-bold text-blue-300">UN Consolidated</span>
</div>
</div>
<div class="badge-item">
<div class="flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-br from-purple-500/20 to-pink-500/20 border border-purple-400/40 shadow-lg shadow-purple-500/10 whitespace-nowrap">
<svg class="w-5 h-5 text-purple-400 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0L3 7v9c0 5.25 3.75 10.17 9 11.25 5.25-1.08 9-6 9-11.25V7L12 0zm-2 16l-4-4 1.41-1.41L10 13.17l6.59-6.59L18 8l-8 8z"/></svg>
<span class="text-[11px] font-bold text-purple-300">EU Sanctions</span>
</div>
</div>
<div class="badge-item">
<div class="flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-br from-pink-500/20 to-rose-500/20 border border-pink-400/40 shadow-lg shadow-pink-500/10 whitespace-nowrap">
<svg class="w-5 h-5 text-pink-400 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0L3 7v9c0 5.25 3.75 10.17 9 11.25 5.25-1.08 9-6 9-11.25V7L12 0zm-2 16l-4-4 1.41-1.41L10 13.17l6.59-6.59L18 8l-8 8z"/></svg>
<span class="text-[11px] font-bold text-pink-300">UK Sanctions</span>
</div>
</div>
<div class="badge-item">
<div class="flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-br from-rose-500/20 to-orange-500/20 border border-rose-400/40 shadow-lg shadow-rose-500/10 whitespace-nowrap">
<svg class="w-5 h-5 text-rose-400 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0L3 7v9c0 5.25 3.75 10.17 9 11.25 5.25-1.08 9-6 9-11.25V7L12 0zm-2 16l-4-4 1.41-1.41L10 13.17l6.59-6.59L18 8l-8 8z"/></svg>
<span class="text-[11px] font-bold text-rose-300">OpenSanctions</span>
</div>
</div>
<div class="badge-item">
<div class="flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-br from-emerald-500/20 to-teal-500/20 border border-emerald-400/40 shadow-lg shadow-emerald-500/10 whitespace-nowrap">
<svg class="w-5 h-5 text-emerald-400 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 3c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6zm7 13H5v-.23c0-.62.28-1.20.76-1.58C7.47 15.82 9.64 15 12 15s4.53.82 6.24 2.19c.48.38.76.97.76 1.58V19z"/></svg>
<span class="text-[11px] font-bold text-emerald-300">UK Companies House</span>
</div>
</div>
<div class="badge-item">
<div class="flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-br from-teal-500/20 to-cyan-500/20 border border-teal-400/40 shadow-lg shadow-teal-500/10 whitespace-nowrap">
<svg class="w-5 h-5 text-teal-400 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg>
<span class="text-[11px] font-bold text-teal-300">OpenCorporates</span>
</div>
</div>
<div class="badge-item">
<div class="flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-br from-cyan-500/20 to-blue-500/20 border border-cyan-400/40 shadow-lg shadow-cyan-500/10 whitespace-nowrap">
<svg class="w-5 h-5 text-cyan-400 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 3c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6zm7 13H5v-.23c0-.62.28-1.20.76-1.58C7.47 15.82 9.64 15 12 15s4.53.82 6.24 2.19c.48.38.76.97.76 1.58V19z"/></svg>
<span class="text-[11px] font-bold text-cyan-300">Singapore ACRA</span>
</div>
</div>
<div class="badge-item">
<div class="flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-br from-red-500/20 to-rose-500/20 border border-red-400/40 shadow-lg shadow-red-500/10 whitespace-nowrap">
<svg class="w-5 h-5 text-red-400 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0L3 7v9c0 5.25 3.75 10.17 9 11.25 5.25-1.08 9-6 9-11.25V7L12 0zm-2 16l-4-4 1.41-1.41L10 13.17l6.59-6.59L18 8l-8 8z"/></svg>
<span class="text-[11px] font-bold text-red-300">FBI Most Wanted</span>
</div>
</div>
<div class="badge-item">
<div class="flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-br from-indigo-500/20 to-purple-500/20 border border-indigo-400/40 shadow-lg shadow-indigo-500/10 whitespace-nowrap">
<svg class="w-5 h-5 text-indigo-400 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg>
<span class="text-[11px] font-bold text-indigo-300">Interpol Red Notices</span>
</div>
</div>
<div class="badge-item">
<div class="flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-br from-blue-500/20 to-cyan-500/20 border border-blue-400/40 shadow-lg shadow-blue-500/10 whitespace-nowrap">
<svg class="w-5 h-5 text-blue-400 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"/></svg>
<span class="text-[11px] font-bold text-blue-300">UK FCA Warnings</span>
</div>
</div>
<div class="badge-item">
<div class="flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-br from-amber-500/20 to-orange-500/20 border border-amber-400/40 shadow-lg shadow-amber-500/10 whitespace-nowrap">
<svg class="w-5 h-5 text-amber-400 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"/></svg>
<span class="text-[11px] font-bold text-amber-300">Swiss FINMA</span>
</div>
</div>
<div class="badge-item">
<div class="flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-br from-orange-500/20 to-red-500/20 border border-orange-400/40 shadow-lg shadow-orange-500/10 whitespace-nowrap">
<svg class="w-5 h-5 text-orange-400 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"/></svg>
<span class="text-[11px] font-bold text-orange-300">SEC Enforcement</span>
</div>
</div>
<!-- Duplicate set for seamless loop -->
<div class="badge-item">
<div class="flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-br from-cyan-500/20 to-blue-500/20 border border-cyan-400/40 shadow-lg shadow-cyan-500/10 whitespace-nowrap">
<svg class="w-5 h-5 text-cyan-400 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0L3 7v9c0 5.25 3.75 10.17 9 11.25 5.25-1.08 9-6 9-11.25V7L12 0zm-2 16l-4-4 1.41-1.41L10 13.17l6.59-6.59L18 8l-8 8z"/></svg>
<span class="text-[11px] font-bold text-cyan-300">OFAC SDN List</span>
</div>
</div>
<div class="badge-item">
<div class="flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-br from-blue-500/20 to-purple-500/20 border border-blue-400/40 shadow-lg shadow-blue-500/10 whitespace-nowrap">
<svg class="w-5 h-5 text-blue-400 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0L3 7v9c0 5.25 3.75 10.17 9 11.25 5.25-1.08 9-6 9-11.25V7L12 0zm-2 16l-4-4 1.41-1.41L10 13.17l6.59-6.59L18 8l-8 8z"/></svg>
<span class="text-[11px] font-bold text-blue-300">UN Consolidated</span>
</div>
</div>
</div>
</div>

<!-- Summary Stats -->
<div class="mt-8 grid grid-cols-3 gap-4 max-w-2xl mx-auto">
<div class="text-center bg-slate-900/40 rounded-lg p-3 border border-slate-800">
<div class="text-2xl font-bold text-cyan-400">15+</div>
<div class="text-[10px] text-slate-400 mt-1">Data Sources</div>
</div>
<div class="text-center bg-slate-900/40 rounded-lg p-3 border border-slate-800">
<div class="text-2xl font-bold text-emerald-400">650M+</div>
<div class="text-[10px] text-slate-400 mt-1">Records Checked</div>
</div>
<div class="text-center bg-slate-900/40 rounded-lg p-3 border border-slate-800">
<div class="text-2xl font-bold text-purple-400">140+</div>
<div class="text-[10px] text-slate-400 mt-1">Countries Covered</div>
</div>
</div>

<p class="text-center text-[10px] text-slate-500 mt-6 max-w-2xl mx-auto">
Cross-references publicly available sanctions lists, corporate registries, and enforcement databases. We are not affiliated with government agencies.
</p>
</div>

<style>
/* Auto-scrolling badge carousel */
.badge-carousel-container {
  width: 100%;
  overflow: hidden;
  position: relative;
}

.badge-carousel {
  display: flex;
  gap: 1rem;
  animation: scroll 40s linear infinite;
  will-change: transform;
}

.badge-carousel:hover {
  animation-play-state: paused;
}

.badge-item {
  flex-shrink: 0;
}

@keyframes scroll {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(-50%);
  }
}

/* Fade edges for smooth appearance */
.badge-carousel-container::before,
.badge-carousel-container::after {
  content: '';
  position: absolute;
  top: 0;
  bottom: 0;
  width: 100px;
  z-index: 2;
  pointer-events: none;
}

.badge-carousel-container::before {
  left: 0;
  background: linear-gradient(to right, rgb(15 23 42 / 0.8), transparent);
}

.badge-carousel-container::after {
  right: 0;
  background: linear-gradient(to left, rgb(15 23 42 / 0.8), transparent);
}
</style>
</section>

<!-- HOW IT WORKS -->
<section class="border-t border-slate-800/80 bg-black/60">
<div class="mx-auto max-w-6xl px-4 py-10 grid md:grid-cols-3 gap-8 text-xs text-slate-300">
<div>
<h3 class="text-sm font-semibold text-slate-100 mb-2">1. Upload the documents</h3>
<p>Upload LOI, ICPO, KYC, or a combined PDF.</p>
</div>
<div>
<h3 class="text-sm font-semibold text-slate-100 mb-2">2. Rules & signals</h3>
<p>We check emails, domains, volumes, patterns, registries, and fingerprints.</p>
</div>
<div>
<h3 class="text-sm font-semibold text-slate-100 mb-2">3. Score & next steps</h3>
<p>You receive a score, flags, and recommended actions.</p>
</div>
</div>
</section>

<!-- PRICING -->
<section class="border-t border-slate-800 bg-slate-950/80">
<div class="mx-auto max-w-6xl px-4 py-10">
<div class="flex items-center justify-between mb-6">
<h2 class="text-sm font-semibold text-slate-100">Pricing</h2>
<div class="flex items-center gap-2">
<button onclick="togglePricingPeriod('monthly')" id="monthlyBtn" class="px-3 py-1 rounded-lg text-xs font-semibold bg-cyan-500 text-white">
Monthly
</button>
<button onclick="togglePricingPeriod('annual')" id="annualBtn" class="px-3 py-1 rounded-lg text-xs font-semibold text-slate-400 hover:text-slate-200">
Annual <span class="text-[10px] text-emerald-400">Save 20%</span>
</button>
</div>
</div>

<!-- MONTHLY PRICING -->
<div id="monthlyPricing" class="grid md:grid-cols-4 gap-4 text-xs">

<div class="rounded-xl border border-emerald-500/40 bg-emerald-500/5 p-4">
<div class="text-emerald-300 font-semibold">ğŸ’µ Pay-As-You-Go</div>
<div class="text-lg font-semibold text-slate-50">$9<span class="text-xs text-slate-400">/check</span></div>
<p class="mt-2 text-slate-400">No subscription needed.</p>
<div class="mt-3 flex items-center gap-1 text-[10px] text-emerald-400">
<svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.562 14.813h-2.094v2.094h-2.093v-2.094H9.562v-2.094h3.813V9.188H9.562V7.093h3.813V5h2.093v2.093h2.094v2.094h-2.094v3.532h2.094v2.094z"/></svg>
Crypto accepted
</div>
</div>

<div class="rounded-xl border border-slate-800 bg-slate-900/60 p-4">
<div class="text-slate-200 font-semibold">ğŸ“Š Essential</div>
<div class="text-lg font-semibold text-slate-50">$99<span class="text-xs text-slate-400">/month</span></div>
<p class="mt-2 text-slate-400">25 checks/month<br/>$5/check overage</p>
<div class="mt-3 flex items-center gap-1 text-[10px] text-slate-500">
<svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.562 14.813h-2.094v2.094h-2.093v-2.094H9.562v-2.094h3.813V9.188H9.562V7.093h3.813V5h2.093v2.093h2.094v2.094h-2.094v3.532h2.094v2.094z"/></svg>
Crypto accepted
</div>
</div>

<div class="rounded-xl border border-cyan-500/60 bg-cyan-500/5 p-4">
<div class="text-cyan-300 font-semibold">âš¡ Professional</div>
<div class="text-lg font-semibold text-slate-50">$299<span class="text-xs text-slate-400">/month</span></div>
<p class="mt-2 text-slate-400">150 checks/month<br/>$3/check overage<br/>Priority support</p>
<div class="mt-3 flex items-center gap-1 text-[10px] text-cyan-400">
<svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.562 14.813h-2.094v2.094h-2.093v-2.094H9.562v-2.094h3.813V9.188H9.562V7.093h3.813V5h2.093v2.093h2.094v2.094h-2.094v3.532h2.094v2.094z"/></svg>
Crypto accepted
</div>
</div>

<div class="rounded-xl border border-purple-500/60 bg-purple-500/5 p-4">
<div class="text-purple-300 font-semibold">ğŸ¢ Enterprise</div>
<div class="text-lg font-semibold text-slate-50">$399<span class="text-xs text-slate-400">/month</span></div>
<p class="mt-2 text-slate-400">Unlimited checks<br/>API access<br/>Team seats</p>
<div class="mt-3 flex items-center gap-1 text-[10px] text-purple-400">
<svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.562 14.813h-2.094v2.094h-2.093v-2.094H9.562v-2.094h3.813V9.188H9.562V7.093h3.813V5h2.093v2.093h2.094v2.094h-2.094v3.532h2.094v2.094z"/></svg>
Crypto accepted
</div>
</div>

</div>

<!-- ANNUAL PRICING (hidden by default) -->
<div id="annualPricing" class="hidden grid md:grid-cols-4 gap-4 text-xs">

<div class="rounded-xl border border-emerald-500/40 bg-emerald-500/5 p-4">
<div class="text-emerald-300 font-semibold">ğŸ’µ Pay-As-You-Go</div>
<div class="text-lg font-semibold text-slate-50">$9<span class="text-xs text-slate-400">/check</span></div>
<p class="mt-2 text-slate-400">No subscription needed.</p>
<div class="mt-3 flex items-center gap-1 text-[10px] text-emerald-400">
<svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.562 14.813h-2.094v2.094h-2.093v-2.094H9.562v-2.094h3.813V9.188H9.562V7.093h3.813V5h2.093v2.093h2.094v2.094h-2.094v3.532h2.094v2.094z"/></svg>
Crypto accepted
</div>
</div>

<div class="rounded-xl border border-slate-800 bg-slate-900/60 p-4 relative">
<div class="absolute -top-2 -right-2 bg-emerald-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-full">SAVE $238</div>
<div class="text-slate-200 font-semibold">ğŸ“Š Essential</div>
<div class="text-lg font-semibold text-slate-50">$950<span class="text-xs text-slate-400">/year</span></div>
<p class="mt-2 text-slate-400 text-[11px]"><span class="line-through text-slate-600">$1,188</span> â†’ $950/year<br/>25 checks/month<br/>$5/check overage</p>
<div class="mt-3 flex items-center gap-1 text-[10px] text-emerald-400">
<svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
20% savings
</div>
</div>

<div class="rounded-xl border border-cyan-500/60 bg-cyan-500/5 p-4 relative">
<div class="absolute -top-2 -right-2 bg-emerald-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-full">SAVE $718</div>
<div class="text-cyan-300 font-semibold">âš¡ Professional</div>
<div class="text-lg font-semibold text-slate-50">$2,870<span class="text-xs text-slate-400">/year</span></div>
<p class="mt-2 text-slate-400 text-[11px]"><span class="line-through text-slate-600">$3,588</span> â†’ $2,870/year<br/>150 checks/month<br/>$3/check overage<br/>Priority support</p>
<div class="mt-3 flex items-center gap-1 text-[10px] text-cyan-400">
<svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
20% savings
</div>
</div>

<div class="rounded-xl border border-purple-500/60 bg-purple-500/5 p-4 relative">
<div class="absolute -top-2 -right-2 bg-emerald-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-full">SAVE $958</div>
<div class="text-purple-300 font-semibold">ğŸ¢ Enterprise</div>
<div class="text-lg font-semibold text-slate-50">$3,830<span class="text-xs text-slate-400">/year</span></div>
<p class="mt-2 text-slate-400 text-[11px]"><span class="line-through text-slate-600">$4,788</span> â†’ $3,830/year<br/>Unlimited checks<br/>API access<br/>Team seats</p>
<div class="mt-3 flex items-center gap-1 text-[10px] text-purple-400">
<svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
20% savings
</div>
</div>

</div>

</div>
</section>

</main>
</div>

<!-- UPSELL FLOATING BUTTON -->
<button onclick="openUpsell()"
class="fixed bottom-5 right-5 z-40 px-5 py-3 rounded-full font-semibold text-black bg-yellow-400 hover:bg-yellow-300 shadow-xl shadow-yellow-500/30 text-sm">
Upsell Me
</button>

<!-- CRYPTO PAYMENT MODAL -->
<div id="cryptoModal"
class="fixed inset-0 bg-black/70 backdrop-blur-sm hidden items-center justify-center z-50">
<div class="bg-slate-800 p-8 rounded-2xl w-[94%] max-w-lg shadow-xl border border-slate-700 relative">

<h2 class="text-2xl font-bold text-white mb-4 text-center">
ğŸ’° Pay with Cryptocurrency
</h2>

<p class="text-slate-300 text-center mb-6 text-sm">
Fast, secure, and private. We accept multiple cryptocurrencies for subscription payments.
</p>

<div class="space-y-3 mb-6">
<div class="bg-slate-900/60 p-4 rounded-lg border border-slate-700 hover:border-orange-500 transition cursor-pointer">
<div class="flex items-center gap-3">
<svg class="w-8 h-8 text-orange-500" fill="currentColor" viewBox="0 0 24 24">
<path d="M23.638 14.904c-1.602 6.43-8.113 10.34-14.542 8.736C2.67 22.05-1.244 15.525.362 9.105 1.962 2.67 8.475-1.243 14.9.358c6.43 1.605 10.342 8.115 8.738 14.548v-.002zm-6.35-4.613c.24-1.59-.974-2.45-2.64-3.03l.54-2.153-1.315-.33-.525 2.107c-.345-.087-.705-.167-1.064-.25l.526-2.127-1.32-.33-.54 2.165c-.285-.067-.565-.132-.84-.2l-1.815-.45-.35 1.407s.975.225.955.236c.535.136.63.486.615.766l-1.477 5.92c-.075.166-.24.406-.614.314.015.02-.96-.24-.96-.24l-.66 1.51 1.71.426.93.242-.54 2.19 1.32.327.54-2.17c.36.1.705.19 1.05.273l-.51 2.154 1.32.33.545-2.19c2.24.427 3.93.257 4.64-1.774.57-1.637-.03-2.58-1.217-3.196.854-.193 1.5-.76 1.68-1.93h.01zm-3.01 4.22c-.404 1.64-3.157.75-4.05.53l.72-2.9c.896.23 3.757.67 3.33 2.37zm.41-4.24c-.37 1.49-2.662.735-3.405.55l.654-2.64c.744.18 3.137.524 2.75 2.084v.006z"/>
</svg>
<div class="flex-1">
<p class="font-semibold text-white">Bitcoin (BTC)</p>
<p class="text-xs text-slate-400">Network: Bitcoin Mainnet</p>
</div>
</div>
</div>

<div class="bg-slate-900/60 p-4 rounded-lg border border-slate-700 hover:border-purple-500 transition cursor-pointer">
<div class="flex items-center gap-3">
<svg class="w-8 h-8 text-purple-500" fill="currentColor" viewBox="0 0 24 24">
<path d="M11.944 17.97L4.58 13.62 11.943 24l7.37-10.38-7.372 4.35h.003zM12.056 0L4.69 12.223l7.365 4.354 7.365-4.35L12.056 0z"/>
</svg>
<div class="flex-1">
<p class="font-semibold text-white">Ethereum (ETH)</p>
<p class="text-xs text-slate-400">Network: Ethereum Mainnet</p>
</div>
</div>
</div>

<div class="bg-slate-900/60 p-4 rounded-lg border border-slate-700 hover:border-green-500 transition cursor-pointer">
<div class="flex items-center gap-3">
<svg class="w-8 h-8 text-green-500" fill="currentColor" viewBox="0 0 24 24">
<circle cx="12" cy="12" r="12" fill="#26A17B"/>
<path d="M16.2 9.8c-.1-.6-.6-1-1.2-1H9c-.6 0-1 .4-1 1v4.4c0 .6.4 1 1 1h6c.6 0 1-.4 1-1v-4.4zm-1 4h-6v-4h6v4z" fill="white"/>
</svg>
<div class="flex-1">
<p class="font-semibold text-white">USDT (Tether)</p>
<p class="text-xs text-slate-400">Network: ERC-20, TRC-20</p>
</div>
</div>
</div>

<div class="bg-slate-900/60 p-4 rounded-lg border border-slate-700 hover:border-blue-500 transition cursor-pointer">
<div class="flex items-center gap-3">
<svg class="w-8 h-8 text-blue-500" fill="currentColor" viewBox="0 0 24 24">
<circle cx="12" cy="12" r="12" fill="#2775CA"/>
<path d="M12 4C7.6 4 4 7.6 4 12s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm0 13c-2.8 0-5-2.2-5-5s2.2-5 5-5 5 2.2 5 5-2.2 5-5 5z" fill="white"/>
<circle cx="12" cy="12" r="3" fill="white"/>
</svg>
<div class="flex-1">
<p class="font-semibold text-white">USDC (USD Coin)</p>
<p class="text-xs text-slate-400">Network: Multiple chains</p>
</div>
</div>
</div>

<div class="bg-slate-900/60 p-4 rounded-lg border border-slate-700 hover:border-cyan-500 transition cursor-pointer">
<div class="flex items-center gap-3">
<svg class="w-8 h-8 text-cyan-500" fill="currentColor" viewBox="0 0 24 24">
<circle cx="12" cy="12" r="10" fill="#375BD2"/>
<path d="M12 6l-1.5 4.5H6l3.75 2.7L8.25 18 12 15.3l3.75 2.7-1.5-4.8L18 10.5h-4.5L12 6z" fill="white"/>
</svg>
<div class="flex-1">
<p class="font-semibold text-white">Chainlink (LINK)</p>
<p class="text-xs text-slate-400">Network: Ethereum, Multiple chains</p>
</div>
</div>
</div>

<div class="bg-slate-900/60 p-4 rounded-lg border border-slate-700 hover:border-pink-500 transition cursor-pointer">
<div class="flex items-center gap-3">
<svg class="w-8 h-8 text-pink-500" fill="currentColor" viewBox="0 0 24 24">
<circle cx="12" cy="12" r="11" fill="#ED1E79"/>
<path d="M7 12h10M12 7v10" stroke="white" stroke-width="2" stroke-linecap="round"/>
</svg>
<div class="flex-1">
<p class="font-semibold text-white">Internet Computer (ICP)</p>
<p class="text-xs text-slate-400">Network: Internet Computer</p>
</div>
</div>
</div>

<div class="bg-slate-900/60 p-4 rounded-lg border border-slate-700 hover:border-red-500 transition cursor-pointer">
<div class="flex items-center gap-3">
<svg class="w-8 h-8 text-red-500" fill="currentColor" viewBox="0 0 24 24">
<circle cx="12" cy="12" r="11" fill="#DC2626"/>
<path d="M8 9l4 3 4-3M8 15l4-3 4 3" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
<div class="flex-1">
<p class="font-semibold text-white">Bittensor (TAO)</p>
<p class="text-xs text-slate-400">Network: Bittensor</p>
</div>
</div>
</div>

<div class="bg-slate-900/60 p-4 rounded-lg border border-slate-700 hover:border-amber-500 transition cursor-pointer">
<div class="flex items-center gap-3">
<svg class="w-8 h-8 text-amber-500" fill="currentColor" viewBox="0 0 24 24">
<circle cx="12" cy="12" r="11" fill="#F59E0B"/>
<path d="M12 6v12M6 12h12" stroke="white" stroke-width="2.5" stroke-linecap="round"/>
<circle cx="12" cy="12" r="3" fill="white"/>
</svg>
<div class="flex-1">
<p class="font-semibold text-white">World Liberty Financial (WLFI)</p>
<p class="text-xs text-slate-400">Network: Ethereum</p>
</div>
</div>
</div>
</div>

<div class="bg-cyan-500/10 border border-cyan-500/30 rounded-lg p-4 mb-6">
<p class="text-xs text-cyan-300 text-center">
ğŸ’¡ <strong>How it works:</strong> Select your cryptocurrency, complete payment, and receive instant access to your subscription. No credit card required.
</p>
</div>

<div class="flex flex-col sm:flex-row items-center justify-center gap-4">
<button onclick="alert('Crypto payment integration would connect to payment processor here')" class="px-6 py-3 rounded-xl font-semibold text-black bg-gradient-to-r from-orange-400 to-yellow-400 hover:from-orange-500 hover:to-yellow-500 transition text-sm">
Continue with Crypto
</button>
<button onclick="closeCryptoModal()" class="text-sm text-slate-400 hover:text-slate-200 underline">
Cancel
</button>
</div>

<button onclick="closeCryptoModal()" class="absolute top-3 right-4 text-slate-400 text-2xl hover:text-white">
&times;
</button>

</div>
</div>

<!-- UPSELL MODAL -->
<div id="upsellModal"
class="fixed inset-0 bg-black/70 backdrop-blur-sm hidden items-center justify-center z-50">
<div class="bg-slate-800 p-8 rounded-2xl w-[94%] max-w-lg shadow-xl border border-slate-700 relative">

<h2 class="text-2xl font-bold text-white mb-4 text-center">
Unlock Full Dude Diligence Access
</h2>

<p class="text-slate-300 text-center mb-6 text-sm">
Unlimited verifications, blacklist checks, passport validation, fraud scanning, and more.
</p>

<ul class="text-slate-200 space-y-2 mb-6 text-sm">
<li>â€¢ Unlimited LOI / ICPO analysis</li>
<li>â€¢ Corporate registry & blacklist scanning</li>
<li>â€¢ Bank SWIFT verification</li>
<li>â€¢ Passport authenticity checks</li>
<li>â€¢ Buyer capacity estimation</li>
<li>â€¢ Scam-pattern detection</li>
</ul>

<div class="text-center mb-6">
<span class="text-3xl font-bold text-yellow-400">$49/mo</span>
<p class="text-xs text-slate-400 mt-2">ğŸ’° Pay with crypto or card</p>
</div>

<div class="flex flex-col sm:flex-row items-center justify-center gap-4">
<button onclick="handleStripePayment()" class="px-6 py-3 rounded-xl font-semibold text-white bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 transition text-sm shadow-lg">
ğŸ’³ Pay with Card (Stripe)
</button>
<button onclick="openCryptoModal(); closeUpsell();" class="px-6 py-3 rounded-xl font-semibold text-slate-900 bg-gradient-to-r from-orange-400 to-yellow-400 hover:from-orange-500 hover:to-yellow-500 transition text-sm">
â‚¿ Pay with Crypto
</button>
</div>

<button onclick="closeUpsell()" class="absolute top-3 right-4 text-slate-400 text-2xl hover:text-white">
&times;
</button>

</div>
</div>

<!-- SCRIPT -->
<script>
// Global state
let currentFile = null;
let currentHash = null;
let currentResult = null;
let documentFingerprints = [];

// Simulated databases
const BLACKLIST_DB = [
    { company: "fake trading llc", reason: "Known scammer", severity: "BLACK" },
    { company: "ghost commodities", reason: "Document fraud", severity: "RED" },
    { email: "scammer@fakemail.com", reason: "Multiple fraud cases", severity: "BLACK" }
];

const SANCTIONS_LIST = [
    { name: "sanctioned entity inc", list: "OFAC", country: "XX" },
    { name: "blocked trading co", list: "EU Sanctions", country: "YY" }
];

// File upload handling
const fileInput = document.getElementById('fileInput');

fileInput.addEventListener('change', (e) => {
    const file = e.target.files[0];
    if (file) {
        currentFile = file;
        document.getElementById('dropzoneText').textContent = `âœ“ ${file.name}`;
        document.getElementById('statusMessage').textContent = 'File ready. Click "Run Dude Diligence" to analyze.';
    }
});

// Calculate SHA-256 fingerprint
async function calculateFingerprint(file) {
    return new Promise((resolve) => {
        const reader = new FileReader();
        reader.onload = (e) => {
            const wordArray = CryptoJS.lib.WordArray.create(e.target.result);
            const hash = CryptoJS.SHA256(wordArray).toString();
            resolve(hash);
        };
        reader.readAsArrayBuffer(file);
    });
}

// Check for document reuse
function checkDocumentReuse(hash) {
    const existing = documentFingerprints.find(fp => fp.hash === hash);
    if (existing) {
        return {
            isReused: true,
            previousUse: existing.uploadDate,
            timesUsed: existing.count
        };
    }
    return { isReused: false };
}

// Rule-based scoring engine
function calculateRuleBasedScore(data) {
    let score = 100;
    const redFlags = [];
    const positiveSignals = [];

    // KYC Document Scoring (different rules)
    if (data.documentType === "KYC") {
        // KYC-specific checks
        if (!data.buyer?.name || data.buyer.name === "Not specified") {
            score -= 20;
            redFlags.push("Company name missing from KYC");
        } else {
            positiveSignals.push("Company identified: " + data.buyer.name);
        }

        if (!data.buyer?.representative || data.buyer.representative === "Not specified") {
            score -= 15;
            redFlags.push("Representative name missing");
        } else {
            positiveSignals.push("Representative identified");
        }

        if (!data.buyer?.country || data.buyer.country === "Not specified") {
            score -= 10;
            redFlags.push("Country not specified");
        } else {
            positiveSignals.push("Country: " + data.buyer.country);
        }

        if (data.paymentTerms === "Not specified") {
            score -= 15;
            redFlags.push("Bank information missing");
        } else {
            positiveSignals.push("Banking details provided");
        }

        if (data.deliveryTerms === "Not specified") {
            score -= 10;
            redFlags.push("Source of funds not declared");
        } else {
            positiveSignals.push("Source of funds declared");
        }

        // For KYC, we don't penalize missing commodity/price/quantity
        // Those aren't expected in KYC documents
        
    } else {
        // LOI/ICPO Document Scoring (original rules)
        
        // Company Reality Checks
        if (!data.buyer?.name || data.buyer.name === "Not specified") {
            score -= 15;
            redFlags.push("Buyer company name missing");
        } else {
            positiveSignals.push("Buyer company name provided");
        }

        if (!data.seller?.name || data.seller.name === "Not specified") {
            score -= 15;
            redFlags.push("Seller company name missing");
        } else {
            positiveSignals.push("Seller company name provided");
        }

        // Deal Reality Checks (only for LOI/ICPO)
        if (!data.quantity || data.quantity === "Not specified") {
            score -= 10;
            redFlags.push("Quantity not specified");
        } else {
            positiveSignals.push("Quantity specified");
        }

        if (!data.price || data.price === "Not specified") {
            score -= 10;
            redFlags.push("Price not specified");
        } else {
            positiveSignals.push("Price specified");
        }

        if (!data.paymentTerms || data.paymentTerms === "Not specified") {
            score -= 8;
            redFlags.push("Payment terms missing");
        } else {
            const paymentLower = data.paymentTerms.toLowerCase();
            if (paymentLower.includes('upfront') || paymentLower.includes('advance') || paymentLower.includes('100%')) {
                score -= 15;
                redFlags.push("âš ï¸ 100% upfront payment - HIGH FRAUD RISK");
            } else {
                positiveSignals.push("Payment terms specified");
            }
        }

        // Document Integrity Checks
        if (!data.deliveryTerms || data.deliveryTerms === "Not specified") {
            score -= 7;
            redFlags.push("Delivery terms missing");
        }

        if (!data.port || data.port === "Not specified") {
            score -= 7;
            redFlags.push("Port not specified");
        }
    }

    // Email/Identity Checks (applies to both KYC and LOI)
    const freeEmailDomains = ['gmail.com', 'yahoo.com', 'hotmail.com', 'outlook.com', 'aol.com'];
    
    if (data.buyer?.email && data.buyer.email !== "Not specified") {
        const buyerDomain = data.buyer.email.split('@')[1]?.toLowerCase();
        if (freeEmailDomains.includes(buyerDomain)) {
            score -= 12;
            redFlags.push("Buyer using free email domain");
        } else {
            positiveSignals.push("Buyer using corporate email");
        }
    } else {
        score -= 8;
        redFlags.push("Buyer email not provided");
    }

    if (data.seller?.email && data.seller.email !== "Not specified") {
        const sellerDomain = data.seller.email.split('@')[1]?.toLowerCase();
        if (freeEmailDomains.includes(sellerDomain)) {
            score -= 12;
            redFlags.push("Seller using free email domain");
        } else {
            positiveSignals.push("Seller using corporate email");
        }
    } else if (data.documentType !== "KYC") {
        // Only penalize missing seller email for LOI/ICPO, not KYC
        score -= 8;
        redFlags.push("Seller email not provided");
    }

    return {
        score: Math.max(0, score),
        redFlags,
        positiveSignals
    };
}

// Check blacklist
function checkBlacklist(data) {
    const hits = [];
    const buyerName = (data.buyer?.name || '').toLowerCase();
    const sellerName = (data.seller?.name || '').toLowerCase();
    const buyerEmail = (data.buyer?.email || '').toLowerCase();
    const sellerEmail = (data.seller?.email || '').toLowerCase();

    BLACKLIST_DB.forEach(entry => {
        if (entry.company && (buyerName.includes(entry.company) || sellerName.includes(entry.company))) {
            hits.push({ type: 'company', match: entry.company, reason: entry.reason, severity: entry.severity });
        }
        if (entry.email && (buyerEmail === entry.email || sellerEmail === entry.email)) {
            hits.push({ type: 'email', match: entry.email, reason: entry.reason, severity: entry.severity });
        }
    });

    return hits;
}

// Check sanctions
function checkSanctions(data) {
    const hits = [];
    const buyerName = (data.buyer?.name || '').toLowerCase();
    const sellerName = (data.seller?.name || '').toLowerCase();

    SANCTIONS_LIST.forEach(entry => {
        if (buyerName.includes(entry.name) || sellerName.includes(entry.name)) {
            hits.push({
                entity: entry.name,
                list: entry.list,
                country: entry.country,
                matchedParty: buyerName.includes(entry.name) ? 'buyer' : 'seller'
            });
        }
    });

    return hits;
}

// ========================================
// PHASE 1: FREE DATABASE INTEGRATIONS
// ========================================

// Check UK Companies House (FREE API)
async function checkUKCompaniesHouse(companyName, country) {
    // Only check if company is UK-based
    if (!country || !country.toLowerCase().includes('uk') && !country.toLowerCase().includes('united kingdom') && !country.toLowerCase().includes('great britain')) {
        return null;
    }
    
    try {
        // UK Companies House API
        // Note: This is a demo - in production, you'd need an API key from https://developer.companieshouse.gov.uk
        const encodedName = encodeURIComponent(companyName);
        
        // For now, we'll mark it as "checked" but not actually call (would need API key)
        return {
            checked: true,
            source: 'UK Companies House',
            status: 'API key required for live verification',
            message: 'UK company verification available with API key'
        };
        
        // PRODUCTION CODE (uncomment when you have API key):
        /*
        const response = await fetch(`https://api.companieshouse.gov.uk/search/companies?q=${encodedName}`, {
            headers: {
                'Authorization': 'YOUR_API_KEY_HERE'
            }
        });
        const data = await response.json();
        
        if (data.items && data.items.length > 0) {
            const match = data.items[0];
            return {
                verified: true,
                source: 'UK Companies House',
                companyNumber: match.company_number,
                status: match.company_status,
                address: match.registered_office_address
            };
        }
        */
    } catch (error) {
        console.error('UK Companies House check failed:', error);
        return null;
    }
}

// Check OpenCorporates (FREE - 500 requests/month)
async function checkOpenCorporates(companyName) {
    try {
        const encodedName = encodeURIComponent(companyName);
        
        // OpenCorporates has CORS restrictions, so this is a placeholder
        // In production, you'd call this from your backend
        return {
            checked: true,
            source: 'OpenCorporates',
            status: 'Backend integration required',
            message: 'Global company verification available',
            coverage: '200M+ companies in 140+ jurisdictions'
        };
        
        // PRODUCTION CODE (call from backend):
        /*
        const response = await fetch(`https://api.opencorporates.com/v0.4/companies/search?q=${encodedName}`);
        const data = await response.json();
        
        if (data.results && data.results.companies.length > 0) {
            const match = data.results.companies[0].company;
            return {
                verified: true,
                source: 'OpenCorporates',
                name: match.name,
                jurisdiction: match.jurisdiction_code,
                status: match.current_status,
                incorporationDate: match.incorporation_date
            };
        }
        */
    } catch (error) {
        console.error('OpenCorporates check failed:', error);
        return null;
    }
}

// Check OpenSanctions (FREE - comprehensive sanctions database)
async function checkOpenSanctions(entityName) {
    try {
        const encodedName = encodeURIComponent(entityName);
        
        // OpenSanctions API - completely free!
        return {
            checked: true,
            source: 'OpenSanctions',
            status: 'Integration ready',
            message: 'Covers OFAC, UN, EU, UK, and 300+ other lists',
            coverage: '450,000+ sanctioned entities'
        };
        
        // PRODUCTION CODE (can implement now - no API key needed):
        /*
        const response = await fetch(`https://api.opensanctions.org/search/default?q=${encodedName}`);
        const data = await response.json();
        
        if (data.results && data.results.length > 0) {
            return {
                hit: true,
                source: 'OpenSanctions',
                matches: data.results.map(r => ({
                    name: r.caption,
                    schema: r.schema,
                    countries: r.countries,
                    datasets: r.datasets
                }))
            };
        }
        */
    } catch (error) {
        console.error('OpenSanctions check failed:', error);
        return null;
    }
}

// Check Singapore ACRA (FREE for basic lookups)
async function checkSingaporeACRA(companyName, country) {
    if (!country || !country.toLowerCase().includes('singapore')) {
        return null;
    }
    
    return {
        checked: true,
        source: 'Singapore ACRA',
        status: 'Integration ready',
        message: 'Singapore company verification available'
    };
}

// Enhanced database coverage tracker
const DATABASE_COVERAGE = {
    sanctions: [
        { name: 'OFAC SDN List', country: 'ğŸ‡ºğŸ‡¸ USA', records: '12,000+' },
        { name: 'UN Consolidated List', country: 'ğŸŒ Global', records: '1,000+' },
        { name: 'EU Sanctions', country: 'ğŸ‡ªğŸ‡º EU', records: '2,000+' },
        { name: 'UK Sanctions', country: 'ğŸ‡¬ğŸ‡§ UK', records: '1,500+' },
        { name: 'OpenSanctions', country: 'ğŸŒ Global', records: '450,000+' }
    ],
    companies: [
        { name: 'UK Companies House', country: 'ğŸ‡¬ğŸ‡§ UK', records: '5M+' },
        { name: 'OpenCorporates', country: 'ğŸŒ Global', records: '200M+' },
        { name: 'Singapore ACRA', country: 'ğŸ‡¸ğŸ‡¬ Singapore', records: '500K+' }
    ],
    enforcement: [
        { name: 'FBI Most Wanted', country: 'ğŸ‡ºğŸ‡¸ USA', records: '500+' },
        { name: 'Interpol Red Notices', country: 'ğŸŒ Global', records: '7,000+' },
        { name: 'SEC Enforcement', country: 'ğŸ‡ºğŸ‡¸ USA', records: '10,000+' }
    ],
    financial: [
        { name: 'UK FCA Warning List', country: 'ğŸ‡¬ğŸ‡§ UK', records: '8,000+' },
        { name: 'Swiss FINMA Warnings', country: 'ğŸ‡¨ğŸ‡­ Switzerland', records: '1,000+' }
    ]
};

// Run enhanced database checks
async function runEnhancedDatabaseChecks(extractedData) {
    const results = {
        ukCompaniesHouse: null,
        openCorporates: null,
        openSanctions: null,
        singaporeACRA: null,
        databasesCovered: 15, // Total databases we reference
        checksPerformed: 0
    };
    
    const companyName = extractedData.buyer?.name;
    const country = extractedData.buyer?.country;
    
    if (companyName && companyName !== 'Not specified') {
        // Check UK Companies House
        results.ukCompaniesHouse = await checkUKCompaniesHouse(companyName, country);
        if (results.ukCompaniesHouse) results.checksPerformed++;
        
        // Check OpenCorporates
        results.openCorporates = await checkOpenCorporates(companyName);
        if (results.openCorporates) results.checksPerformed++;
        
        // Check OpenSanctions
        results.openSanctions = await checkOpenSanctions(companyName);
        if (results.openSanctions) results.checksPerformed++;
        
        // Check Singapore ACRA
        results.singaporeACRA = await checkSingaporeACRA(companyName, country);
        if (results.singaporeACRA) results.checksPerformed++;
    }
    
    return results;
}

// Determine risk level
function determineRiskLevel(score, blacklistHits, sanctionsHits, documentReuse) {
    if (blacklistHits.some(h => h.severity === 'BLACK') || sanctionsHits.length > 0) {
        return 'BLACK';
    }
    if (blacklistHits.some(h => h.severity === 'RED')) {
        return 'RED';
    }
    if (documentReuse.isReused && documentReuse.timesUsed > 3) {
        return 'RED';
    }
    if (score >= 80) return 'GREEN';
    if (score >= 60) return 'YELLOW';
    if (score >= 40) return 'RED';
    return 'BLACK';
}

// Main analysis function - PRODUCTION MODE with Claude API Backend
async function runDiligence() {
    if (!currentFile) {
        document.getElementById('statusMessage').textContent = 'âš ï¸ Please upload a document first.';
        return;
    }

    document.getElementById('statusMessage').textContent = 'ğŸ” Analyzing document...';
    document.getElementById('riskBadge').textContent = 'Processing...';

    try {
        // Calculate fingerprint
        currentHash = await calculateFingerprint(currentFile);
        const reuseCheck = checkDocumentReuse(currentHash);

        // Update fingerprint database
        if (!reuseCheck.isReused) {
            documentFingerprints.push({
                hash: currentHash,
                uploadDate: new Date().toISOString(),
                filename: currentFile.name,
                count: 1
            });
        } else {
            documentFingerprints = documentFingerprints.map(fp => 
                fp.hash === currentHash ? { ...fp, count: fp.count + 1 } : fp
            );
        }

        // Convert file to base64
        const fileBase64 = await new Promise((resolve, reject) => {
            const reader = new FileReader();
            reader.onload = () => {
                const base64 = reader.result.split(',')[1];
                resolve(base64);
            };
            reader.onerror = reject;
            reader.readAsDataURL(currentFile);
        });

        // Call backend API via CORS proxy
        // Call backend API via custom domain (same domain = no CORS!)
        const response = await fetch('https://api.dudediligence.pro/api/analyze', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                fileData: fileBase64,
                fileName: currentFile.name,
                fileType: currentFile.type
            })
        });

        if (!response.ok) {
            throw new Error(`Backend error: ${response.status}`);
        }

        const result = await response.json();
        
        if (!result.success) {
            throw new Error(result.error || 'Analysis failed');
        }

        const extracted = result.data;

        // Store extracted data globally for review form
        window.aiExtractedData = extracted;
        window.extractedFileHash = currentHash;
        window.reuseCheckResult = reuseCheck;

        // Show review form instead of going straight to results
        showReviewForm(extracted);
        
        document.getElementById('statusMessage').textContent = 'âœï¸ Please review the extracted data';

    } catch (error) {
        console.error(error);
        document.getElementById('statusMessage').textContent = `âŒ Error: ${error.message}`;
        document.getElementById('riskBadge').textContent = 'Error';
    }
}

// Show review form with AI-extracted data
function showReviewForm(extracted) {
    // Fill form fields with AI data (NOW USING CORRECT FIELDS!)
    document.getElementById('edit_company_name').value = extracted.buyer?.name || '';
    document.getElementById('edit_country').value = extracted.buyer?.country || '';
    document.getElementById('edit_representative').value = extracted.buyer?.representative || '';
    document.getElementById('edit_email').value = extracted.buyer?.email || '';
    document.getElementById('edit_bank_name').value = extracted.bankName || '';
    document.getElementById('edit_source_funds').value = extracted.sourceOfFunds || '';
    document.getElementById('edit_commodity').value = extracted.commodity || '';
    document.getElementById('edit_quantity').value = extracted.quantity || '';
    document.getElementById('edit_price').value = extracted.price || '';
    
    // VALIDATION LAYER: Detect common AI extraction errors
    validateAndWarn('bank_name', extracted.bankName);
    validateAndWarn('source_funds', extracted.sourceOfFunds);
    
    // Update status indicators
    updateFieldStatus('company_name', extracted.buyer?.name);
    updateFieldStatus('country', extracted.buyer?.country);
    updateFieldStatus('representative', extracted.buyer?.representative);
    updateFieldStatus('email', extracted.buyer?.email);
    updateFieldStatus('bank_name', extracted.bankName);
    updateFieldStatus('source_funds', extracted.sourceOfFunds);
    
    // Show the review form
    document.getElementById('reviewFormSection').classList.remove('hidden');
    
    // Scroll to review form
    document.getElementById('reviewFormSection').scrollIntoView({ behavior: 'smooth' });
}

// VALIDATION LAYER: Detect misclassified data
function validateAndWarn(fieldName, value) {
    const statusEl = document.getElementById(`status_${fieldName}`);
    if (!statusEl || !value || value === 'Not specified') return;
    
    const valueLower = value.toLowerCase();
    
    // Bank Name validation - check for payment instruments
    if (fieldName === 'bank_name') {
        const paymentInstruments = ['sblc', 'mt103', 'mt760', 'mt799', 'bg', 'dlc', 'standby', 'letter of credit', 'l/c', 'documentary'];
        const hasPaymentTerm = paymentInstruments.some(term => valueLower.includes(term));
        
        if (hasPaymentTerm) {
            statusEl.innerHTML = 'âš ï¸ <span class="text-rose-400 font-semibold">WARNING:</span> This looks like a payment instrument, not a bank name. Please correct.';
            statusEl.className = 'text-[10px] text-rose-400 mt-1';
            document.getElementById(`edit_${fieldName}`).classList.add('border-rose-500', 'bg-rose-500/10');
            return;
        }
    }
    
    // Source of Funds validation - check for Incoterms
    if (fieldName === 'source_funds') {
        const incoterms = ['cif', 'fob', 'cfr', 'exw', 'dap', 'ddp', 'fas', 'fca', 'cpt', 'cip'];
        const hasIncoterm = incoterms.some(term => valueLower === term || valueLower.startsWith(term + ' '));
        
        if (hasIncoterm) {
            statusEl.innerHTML = 'âš ï¸ <span class="text-rose-400 font-semibold">WARNING:</span> This is an Incoterm, not a source of funds. Please specify where the money comes from.';
            statusEl.className = 'text-[10px] text-rose-400 mt-1';
            document.getElementById(`edit_${fieldName}`).classList.add('border-rose-500', 'bg-rose-500/10');
            return;
        }
        
        // Check for payment instruments in source of funds
        const paymentInstruments = ['sblc', 'mt103', 'mt760', 'lc', 'letter of credit'];
        const hasPaymentTerm = paymentInstruments.some(term => valueLower.includes(term));
        
        if (hasPaymentTerm) {
            statusEl.innerHTML = 'âš ï¸ <span class="text-rose-400 font-semibold">WARNING:</span> This is a payment method, not a source of funds. Please specify where the money comes from (e.g., "Trading revenue", "Company capital").';
            statusEl.className = 'text-[10px] text-rose-400 mt-1';
            document.getElementById(`edit_${fieldName}`).classList.add('border-rose-500', 'bg-rose-500/10');
            return;
        }
    }
}

// Update field status indicator
function updateFieldStatus(fieldName, value) {
    const statusEl = document.getElementById(`status_${fieldName}`);
    if (!statusEl) return;
    
    if (value && value !== 'Not specified') {
        statusEl.textContent = 'âœ“ AI extracted';
        statusEl.className = 'text-[10px] text-emerald-400 mt-1';
    } else {
        statusEl.textContent = 'âš ï¸ Missing - please add';
        statusEl.className = 'text-[10px] text-amber-400 mt-1';
    }
}

// Skip review and use AI data
function skipReview() {
    document.getElementById('reviewFormSection').classList.add('hidden');
    processData(window.aiExtractedData);
}

// Finalize with user-verified data
function finalizeReport() {
    // Collect form values (NOW WITH CORRECT FIELD MAPPING!)
    const verifiedData = {
        documentType: window.aiExtractedData.documentType,
        commodity: document.getElementById('edit_commodity').value || 'Not specified',
        quantity: document.getElementById('edit_quantity').value || 'Not specified',
        price: document.getElementById('edit_price').value || 'Not specified',
        buyer: {
            name: document.getElementById('edit_company_name').value || 'Not specified',
            country: document.getElementById('edit_country').value || 'Not specified',
            representative: document.getElementById('edit_representative').value || 'Not specified',
            email: document.getElementById('edit_email').value || 'Not specified'
        },
        seller: window.aiExtractedData.seller || {
            name: 'Not specified',
            country: 'Not specified',
            email: 'Not specified'
        },
        bankName: document.getElementById('edit_bank_name').value || 'Not specified',
        sourceOfFunds: document.getElementById('edit_source_funds').value || 'Not specified',
        paymentTerms: window.aiExtractedData.paymentTerms || 'Not specified',
        deliveryTerms: window.aiExtractedData.deliveryTerms || 'Not specified',
        port: window.aiExtractedData.port || 'Not specified'
    };
    
    // Mark as user-verified
    verifiedData.userVerified = true;
    
    // Hide review form
    document.getElementById('reviewFormSection').classList.add('hidden');
    
    // Process the verified data
    processData(verifiedData);
}

// Process data and show results (extracted from runDiligence)
function processData(extracted) {
    const currentHash = window.extractedFileHash;
    const reuseCheck = window.reuseCheckResult;
    
    document.getElementById('statusMessage').textContent = 'ğŸ” Calculating risk score...';
    
    // Run due diligence analysis
    const scoring = calculateRuleBasedScore(extracted);
    const blacklistHits = checkBlacklist(extracted);
    const sanctionsHits = checkSanctions(extracted);
    const riskLevel = determineRiskLevel(scoring.score, blacklistHits, sanctionsHits, reuseCheck);
    
    // Generate next steps
    const nextSteps = [];
    if (riskLevel === 'BLACK') {
        nextSteps.push("â›” DO NOT PROCEED");
        nextSteps.push("Report to compliance");
    } else if (riskLevel === 'RED') {
        nextSteps.push("Require full KYC pack");
        nextSteps.push("Verify company registration");
        nextSteps.push("Request bank reference");
    } else if (riskLevel === 'YELLOW') {
        nextSteps.push("Request business license");
        nextSteps.push("Verify contact info");
        nextSteps.push("Proceed with caution");
    } else {
        nextSteps.push("Standard due diligence");
        nextSteps.push("Verify final docs");
    }
    
    // Store result
    currentResult = {
        score: scoring.score,
        riskLevel,
        summary: `${riskLevel} risk with ${scoring.score}/100 score. ${extracted.userVerified ? 'USER-VERIFIED DATA. ' : ''}${blacklistHits.length > 0 ? 'BLACKLIST HITS. ' : ''}${sanctionsHits.length > 0 ? 'SANCTIONS HITS. ' : ''}${reuseCheck.isReused ? 'Document reused. ' : ''}${scoring.redFlags.length} red flags detected.`,
        redFlags: scoring.redFlags,
        positiveSignals: scoring.positiveSignals,
        nextSteps,
        documentFingerprint: {
            hash: currentHash,
            isReused: reuseCheck.isReused,
            previousUse: reuseCheck.previousUse,
            timesUsed: reuseCheck.timesUsed || 1
        },
        blacklistHits,
        sanctionsHits,
        extractedData: extracted,
        timestamp: new Date().toISOString(),
        userVerified: extracted.userVerified || false
    };
    
    // Update UI
    updateResultsUI(currentResult);
    document.getElementById('statusMessage').textContent = extracted.userVerified ? 'âœ“ Analysis complete (user-verified)' : 'âœ“ Analysis complete.';
}

// DEMO MODE: Enhanced text extraction function for KYC and LOI documents
function extractDataFromText(text) {
    const data = {
        documentType: "Unknown",
        commodity: "Not specified",
        quantity: "Not specified",
        price: "Not specified",
        buyer: {
            name: "Not specified",
            country: "Not specified",
            representative: "Not specified",
            email: "Not specified"
        },
        seller: {
            name: "Not specified",
            country: "Not specified",
            representative: "Not specified",
            email: "Not specified"
        },
        paymentTerms: "Not specified",
        deliveryTerms: "Not specified",
        port: "Not specified"
    };

    const textLower = text.toLowerCase();

    // Detect document type
    if (textLower.includes('kyc') || textLower.includes('compliance package') || textLower.includes('affidavit')) {
        data.documentType = "KYC";
    } else if (textLower.includes('letter of intent') || textLower.includes('loi')) {
        data.documentType = "LOI";
    } else if (textLower.includes('icpo') || textLower.includes('purchase order')) {
        data.documentType = "ICPO";
    } else if (textLower.includes('sco') || textLower.includes('soft corporate offer')) {
        data.documentType = "SCO";
    }

    // KYC-specific extraction
    if (data.documentType === "KYC") {
        // Extract company name - multiple patterns
        const companyPatterns = [
            /(?:full name of corporation|company name|corporation)[:\s]+([^\n]+)/i,
            /(?:on behalf of|for and on behalf of)[:\s]+([A-Z\s]+(?:LTD|LTDA|LLC|INC|CORP|LIMITED|AG|GMBH)[A-Z\s.]*)/i,
            /([A-Z\s]+(?:LTD|LTDA|LLC|INC|CORP|LIMITED|AG|GMBH)[A-Z\s.]*)/
        ];
        
        for (const pattern of companyPatterns) {
            const match = text.match(pattern);
            if (match) {
                data.buyer.name = match[1].trim();
                break;
            }
        }

        // Extract representative name
        const namePatterns = [
            /I,\s+([A-Z\s]+),\s+(?:the undersigned|bearing|hereby)/i,
            /Name[:/\s]+([A-Z\s]+)/i,
            /First name[:\s]+(\w+)[\s\S]{0,100}Last name[:\s]+(\w+)/i
        ];
        
        for (const pattern of namePatterns) {
            const match = text.match(pattern);
            if (match) {
                if (pattern.source.includes('First name')) {
                    data.buyer.representative = `${match[1]} ${match[2]}`.trim();
                } else {
                    data.buyer.representative = match[1].trim();
                }
                break;
            }
        }

        // Extract passport number
        const passportMatch = text.match(/Passport\s+(?:Number|No\.?)[:\s]+([A-Z0-9]+)/i);
        if (passportMatch) {
            data.buyer.representative += ` (Passport: ${passportMatch[1]})`;
        }

        // Extract country
        const countryPatterns = [
            /Country[:\s]+([^\n]+)/i,
            /Country of (?:Citizenship|Issuance)[:\s]+([^\n]+)/i
        ];
        
        for (const pattern of countryPatterns) {
            const match = text.match(pattern);
            if (match) {
                data.buyer.country = match[1].trim();
                break;
            }
        }

        // Extract ALL emails (multiple)
        const emailRegex = /[\w.-]+@[\w.-]+\.\w+/g;
        const emails = text.match(emailRegex);
        if (emails && emails.length > 0) {
            // Primary email
            data.buyer.email = emails[0];
            // If there are multiple emails, note them
            if (emails.length > 1) {
                data.buyer.email += ` (${emails.length} emails found)`;
            }
        }

        // Extract bank information
        const bankNameMatch = text.match(/Bank\s+(?:Name|CLIENTS NAME)[:\s]+([^\n]+)/i);
        if (bankNameMatch) {
            data.paymentTerms = `Bank: ${bankNameMatch[1].trim()}`;
        }

        const accountMatch = text.match(/Account\s+(?:Number|No)[:\s]+([^\n]+)/i);
        if (accountMatch) {
            data.paymentTerms += ` | Account: ${accountMatch[1].trim()}`;
        }

        // Extract source of funds
        const fundsMatch = text.match(/Origin of funds[:\s]+([^\n]+)/i);
        if (fundsMatch) {
            data.deliveryTerms = `Source of Funds: ${fundsMatch[1].trim()}`;
        }

        // Extract fund amount if present
        const amountPatterns = [
            /sum of[:\s]+([A-Z\s]+MILLION[^\n]+)/i,
            /\$[â‚¬]?[\d,]+(?:\.\d{2})?/g
        ];
        
        for (const pattern of amountPatterns) {
            const match = text.match(pattern);
            if (match) {
                data.quantity = Array.isArray(match) ? match[0] : match[1];
                break;
            }
        }
    } 
    
    // LOI/ICPO extraction (existing logic)
    else {
        // Extract buyer info
        const buyerMatch = text.match(/buyer[:\s]+([^\n]+)/i);
        if (buyerMatch) data.buyer.name = buyerMatch[1].trim();

        // Extract seller info
        const sellerMatch = text.match(/seller[:\s]+([^\n]+)/i);
        if (sellerMatch) data.seller.name = sellerMatch[1].trim();

        // Extract emails
        const emailRegex = /[\w.-]+@[\w.-]+\.\w+/g;
        const emails = text.match(emailRegex);
        if (emails && emails.length > 0) {
            data.buyer.email = emails[0];
            if (emails.length > 1) data.seller.email = emails[1];
        }

        // Extract commodity
        const commodities = ['sugar', 'icumsa', 'soybean', 'oil', 'wheat', 'corn', 'rice', 'gold', 'copper', 'coal', 'crude'];
        for (const commodity of commodities) {
            if (textLower.includes(commodity)) {
                const commodityMatch = text.match(new RegExp(`(${commodity}[^\\n]{0,30})`, 'i'));
                if (commodityMatch) data.commodity = commodityMatch[1].trim();
                break;
            }
        }

        // Extract quantity
        const quantityMatch = text.match(/quantity[:\s]+([^\n]+)/i) || text.match(/(\d+[\s,]*(?:MT|metric ton|tons?))/i);
        if (quantityMatch) data.quantity = quantityMatch[1].trim();

        // Extract price
        const priceMatch = text.match(/price[:\s]+([^\n]+)/i) || text.match(/(\$[\d,]+(?:\.\d{2})?[\s]*(?:per|\/)?[\s]*(?:MT|ton)?)/i);
        if (priceMatch) data.price = priceMatch[1].trim();

        // Extract payment terms
        const paymentMatch = text.match(/payment[:\s]+([^\n]+)/i);
        if (paymentMatch) data.paymentTerms = paymentMatch[1].trim();

        // Extract delivery terms
        const deliveryMatch = text.match(/delivery[:\s]+([^\n]+)/i) || text.match(/(FOB|CIF|CFR|FAS)[^\n]*/i);
        if (deliveryMatch) data.deliveryTerms = deliveryMatch[1].trim();

        // Extract port
        const portMatch = text.match(/port[:\s]+([^\n]+)/i);
        if (portMatch) data.port = portMatch[1].trim();
    }

    return data;
}

// Update results UI
function updateResultsUI(result) {
    // Timestamp
    const now = new Date();
    document.getElementById('timestamp').textContent = now.toLocaleString('en-US', { 
        month: 'short', day: 'numeric', year: 'numeric', hour: 'numeric', minute: '2-digit' 
    });
    
    // Risk badge with glow effect
    const riskBadge = document.getElementById('riskBadge');
    riskBadge.textContent = `${result.riskLevel} RISK`;
    
    const riskColors = {
        'GREEN': 'bg-emerald-500/20 border-emerald-400 text-emerald-300 shadow-emerald-500/50',
        'YELLOW': 'bg-amber-500/20 border-amber-400 text-amber-300 shadow-amber-500/50',
        'RED': 'bg-rose-500/20 border-rose-400 text-rose-300 shadow-rose-500/50',
        'BLACK': 'bg-gray-900 border-gray-700 text-gray-100 shadow-gray-900/50'
    };
    
    riskBadge.className = `rounded-full border px-4 py-2 text-sm font-bold shadow-lg ${riskColors[result.riskLevel]}`;

    // Score with animated progress bar
    document.getElementById('score').textContent = `${result.score} / 100`;
    
    const scoreBar = document.getElementById('scoreBar');
    const barColors = {
        'GREEN': 'bg-gradient-to-r from-emerald-500 to-green-400',
        'YELLOW': 'bg-gradient-to-r from-amber-500 to-yellow-400',
        'RED': 'bg-gradient-to-r from-rose-500 to-red-400',
        'BLACK': 'bg-gradient-to-r from-gray-700 to-gray-900'
    };
    scoreBar.className = `h-full transition-all duration-1000 ease-out ${barColors[result.riskLevel]}`;
    setTimeout(() => {
        scoreBar.style.width = `${result.score}%`;
    }, 100);
    
    // User-verified badge
    if (result.userVerified) {
        document.getElementById('userVerifiedBadge').classList.remove('hidden');
    }
    
    // Score breakdown (calculate sub-scores)
    const companyScore = Math.min(30, Math.round(result.score * 0.3));
    const dataScore = Math.min(40, Math.round(result.score * 0.4));
    const verificationScore = Math.min(30, Math.round(result.score * 0.3));
    
    document.getElementById('companyScore').textContent = `${companyScore}/30`;
    document.getElementById('dataScore').textContent = `${dataScore}/40`;
    document.getElementById('verificationScore').textContent = `${verificationScore}/30`;
    document.getElementById('scoreBreakdown').classList.remove('hidden');

    // Summary
    document.getElementById('summary').textContent = result.summary;

    // Critical issues (red flags) with point deductions
    const flagsList = document.getElementById('flagsList');
    const criticalSection = document.getElementById('criticalSection');
    if (result.redFlags.length > 0) {
        criticalSection.classList.remove('hidden');
        document.getElementById('criticalCount').textContent = result.redFlags.length;
        
        flagsList.innerHTML = result.redFlags.map((flag, i) => {
            const pointDeduction = 15 - (i * 2); // First flag = -15, second = -13, etc.
            return `<li class="flex items-center justify-between bg-rose-500/5 rounded-lg px-3 py-2 border border-rose-500/20">
                <span class="flex items-center gap-2">
                    <span class="text-rose-400">âš ï¸</span>
                    <span class="text-slate-200">${flag}</span>
                </span>
                <span class="text-[10px] text-rose-400 font-semibold">-${pointDeduction} pts</span>
            </li>`;
        }).join('');
    }
    
    // Positive signals with point additions
    const positiveList = document.getElementById('positiveList');
    const positiveSection = document.getElementById('positiveSection');
    if (result.positiveSignals && result.positiveSignals.length > 0) {
        positiveSection.classList.remove('hidden');
        document.getElementById('positiveCount').textContent = result.positiveSignals.length;
        
        positiveList.innerHTML = result.positiveSignals.map((signal, i) => {
            const pointAddition = 10 - (i * 2); // First signal = +10, second = +8, etc.
            return `<li class="flex items-center justify-between bg-emerald-500/5 rounded-lg px-3 py-2 border border-emerald-500/20">
                <span class="flex items-center gap-2">
                    <span class="text-emerald-400">âœ“</span>
                    <span class="text-slate-200">${signal}</span>
                </span>
                <span class="text-[10px] text-emerald-400 font-semibold">+${pointAddition} pts</span>
            </li>`;
        }).join('');
    }
    
    // Parties Involved (NEW!)
    if (result.extractedData && result.extractedData.parties && result.extractedData.parties.length > 0) {
        document.getElementById('partiesSection').classList.remove('hidden');
        const partiesList = document.getElementById('partiesList');
        
        const roleIcons = {
            'Buyer': 'ğŸ¢',
            'Seller': 'ğŸ­',
            'Intermediary': 'ğŸ”„',
            'Broker': 'ğŸ’¼'
        };
        
        const roleColors = {
            'Buyer': 'border-cyan-500/30 bg-cyan-500/5',
            'Seller': 'border-emerald-500/30 bg-emerald-500/5',
            'Intermediary': 'border-amber-500/30 bg-amber-500/5',
            'Broker': 'border-purple-500/30 bg-purple-500/5'
        };
        
        partiesList.innerHTML = result.extractedData.parties.map(party => {
            const icon = roleIcons[party.role] || 'ğŸ¢';
            const colorClass = roleColors[party.role] || 'border-slate-700 bg-slate-900/40';
            
            return `<div class="border rounded-lg p-3 ${colorClass}">
                <div class="flex items-center gap-2 mb-2">
                    <span class="text-lg">${icon}</span>
                    <span class="text-[10px] font-semibold text-slate-400 uppercase">${party.role}</span>
                </div>
                <div class="space-y-1">
                    <div class="text-[12px] font-semibold text-slate-200">${party.companyName}</div>
                    ${party.country !== 'Not specified' ? `<div class="text-[10px] text-slate-400">ğŸ“ ${party.country}</div>` : ''}
                    ${party.representative !== 'Not specified' ? `<div class="text-[10px] text-slate-300">ğŸ‘¤ ${party.representative}</div>` : ''}
                    ${party.email !== 'Not specified' ? `<div class="text-[10px] text-slate-400">ğŸ“§ ${party.email}</div>` : ''}
                    ${party.phone !== 'Not specified' ? `<div class="text-[10px] text-slate-400">ğŸ“ ${party.phone}</div>` : ''}
                </div>
            </div>`;
        }).join('');
    }
    
    // Extracted data (collapsible)
    if (result.extractedData) {
        document.getElementById('extractedDataSection').classList.remove('hidden');
        document.getElementById('extractedCompany').textContent = result.extractedData.buyer?.name || 'Not specified';
        document.getElementById('extractedCountry').textContent = result.extractedData.buyer?.country || 'Not specified';
        document.getElementById('extractedCommodity').textContent = result.extractedData.commodity || 'Not specified';
        document.getElementById('extractedQuantity').textContent = result.extractedData.quantity || 'Not specified';
    }

    // Fingerprint section
    const fingerprintSection = document.getElementById('fingerprintSection');
    fingerprintSection.classList.remove('hidden');
    
    document.getElementById('fingerprintHash').textContent = `${result.documentFingerprint.hash.substring(0, 32)}...`;
    
    const statusText = result.documentFingerprint.isReused 
        ? `<span class="text-amber-400">âš ï¸ Document Reused (${result.documentFingerprint.timesUsed}x)</span>` 
        : '<span class="text-emerald-400">âœ“ New Document (First Upload)</span>';
    document.getElementById('fingerprintStatus').innerHTML = statusText;
    
    // Recommended actions
    const actionsSection = document.getElementById('actionsSection');
    const nextStepsList = document.getElementById('nextStepsList');
    if (result.nextSteps.length > 0) {
        actionsSection.classList.remove('hidden');
        nextStepsList.innerHTML = result.nextSteps.map((step, i) => {
            const numEmoji = ['1ï¸âƒ£', '2ï¸âƒ£', '3ï¸âƒ£', '4ï¸âƒ£', '5ï¸âƒ£'][i] || 'â€¢';
            return `<li class="flex items-start gap-2 bg-slate-900/40 rounded-lg px-3 py-2 border border-slate-800">
                <span class="text-slate-400">${numEmoji}</span>
                <span class="text-slate-200">${step}</span>
            </li>`;
        }).join('');
    }

    // Show export buttons
    document.getElementById('exportBtn').classList.remove('hidden');
    document.getElementById('exportPdfBtn').classList.remove('hidden');
}

// Toggle extracted data visibility
function toggleExtractedData() {
    const content = document.getElementById('extractedDataContent');
    const toggle = document.getElementById('extractedToggle');
    
    if (content.classList.contains('hidden')) {
        content.classList.remove('hidden');
        toggle.textContent = 'â–²';
    } else {
        content.classList.add('hidden');
        toggle.textContent = 'â–¼';
    }
}

// Export PDF report (enhanced)
function exportPdfReport() {
    alert('PDF Export coming soon! This will generate a professional PDF report with:\n\nâ€¢ Executive summary\nâ€¢ Visual risk indicators\nâ€¢ Detailed findings\nâ€¢ Recommended actions\nâ€¢ Company letterhead\n\nFor now, use JSON export.');
}

// Export JSON report
function exportReport() {
    if (!currentResult) return;
    
    const blob = new Blob([JSON.stringify(currentResult, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `dd-report-${Date.now()}.json`;
    a.click();
    URL.revokeObjectURL(url);
}

// Modal functions
function openCryptoModal() {
    const m = document.getElementById('cryptoModal');
    m.classList.remove('hidden');
    m.classList.add('flex');
}

function closeCryptoModal() {
    const m = document.getElementById('cryptoModal');
    m.classList.add('hidden');
    m.classList.remove('flex');
}

function openUpsell() {
    const m = document.getElementById('upsellModal');
    m.classList.remove('hidden');
    m.classList.add('flex');
}

function closeUpsell() {
    const m = document.getElementById('upsellModal');
    m.classList.add('hidden');
    m.classList.remove('flex');
}

// Toggle pricing period (monthly/annual)
function togglePricingPeriod(period) {
    const monthlyPricing = document.getElementById('monthlyPricing');
    const annualPricing = document.getElementById('annualPricing');
    const monthlyBtn = document.getElementById('monthlyBtn');
    const annualBtn = document.getElementById('annualBtn');
    
    if (period === 'monthly') {
        monthlyPricing.classList.remove('hidden');
        annualPricing.classList.add('hidden');
        monthlyBtn.classList.add('bg-cyan-500', 'text-white');
        monthlyBtn.classList.remove('text-slate-400');
        annualBtn.classList.remove('bg-cyan-500', 'text-white');
        annualBtn.classList.add('text-slate-400');
    } else {
        monthlyPricing.classList.add('hidden');
        annualPricing.classList.remove('hidden');
        annualBtn.classList.add('bg-cyan-500', 'text-white');
        annualBtn.classList.remove('text-slate-400');
        monthlyBtn.classList.remove('bg-cyan-500', 'text-white');
        monthlyBtn.classList.add('text-slate-400');
    }
}

// Stripe payment handler
function handleStripePayment() {
    // TODO: Replace these with your actual Stripe Payment Links
    const STRIPE_PAYMENT_LINKS = {
        basic: 'https://buy.stripe.com/test_YOUR_BASIC_LINK',
        pro: 'https://buy.stripe.com/test_YOUR_PRO_LINK',
        enterprise: 'https://buy.stripe.com/test_YOUR_ENTERPRISE_LINK'
    };
    
    // For now, redirect to Stripe payment link for Basic plan ($49/mo)
    // You'll replace this URL with your actual Stripe Payment Link
    const stripeLink = STRIPE_PAYMENT_LINKS.basic;
    
    // Show instructions for now
    alert('Stripe Integration Instructions:\n\n1. Go to stripe.com and create an account\n2. Create a Payment Link for $49/month\n3. Replace the URL in the handleStripePayment() function\n4. Test the payment flow\n\nFor now, this is a placeholder. Click OK to see where your Stripe link would go.');
    
    // Uncomment this line when you have your Stripe Payment Link:
    // window.location.href = stripeLink;
}
</script>

</body>
</html>
